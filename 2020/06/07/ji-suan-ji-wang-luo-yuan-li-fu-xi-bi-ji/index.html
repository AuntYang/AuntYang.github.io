<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="计算机网络原理复习笔记, 小准子_Code">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>计算机网络原理复习笔记 | 小准子_Code</title>
    <link rel="icon" type="image/png" href="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/favicon.png">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/css/matery.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/css/my.css">

    <script src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/jquery/jquery.min.js"></script>


<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="小准子_Code" type="application/atom+xml">
<link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>


<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">小准子_Code</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">小准子_Code</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    
<script src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/cryptojs/crypto-js.min.js"></script>
<script>
    (function() {
        let pwd = '5a4f77d09a9b2832e2e548152026ceb71b9bcea7d2cadf4b44cc8d23c428001d';
        if (pwd && pwd.length > 0) {
            if (pwd !== CryptoJS.SHA256(prompt('请输入访问本文章的密码')).toString(CryptoJS.enc.Hex)) {
                alert('密码错误，将返回主页！');
                location.href = '/';
            }
        }
    })();
</script>




<div class="bg-cover pd-header post-cover" style="background-image: url('https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/medias/featureimages/11.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">计算机网络原理复习笔记</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        margin: 35px 0 15px 0;
        padding-left: 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        height: calc(100vh - 250px);
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E5%A4%8D%E4%B9%A0/">
                                <span class="chip bg-color">复习</span>
                            </a>
                        
                            <a href="/tags/%E8%80%83%E7%A0%94/">
                                <span class="chip bg-color">考研</span>
                            </a>
                        
                            <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/">
                                <span class="chip bg-color">计算机网络原理</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/source/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/" class="post-category">
                                计算机网络原理
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2020-06-07
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2023-03-23
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    25.9k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    91 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">
        <div class="card-content article-card-content">
            <div id="articleContent">
                <p>第一章考小题、第五章主要考拥塞控制、第六章名词解释<br>串行通信和并行通信<br>MAC地址那块分清楚单播、广播、多播，及应用场合，什么时候封装MAC帧<br>一定要知道交换表怎么生成<br>第三章把作业弄明白<br>IP协议簇和网络中间设备的区别、IP数据报格式及首部检验和计算、分片、协议字段值的表格记下来<br>子网划分（重要）<br>例题4-4、CIDR（4-27）、ICMP记一下概念<br>第四章（比重50%）：路由转发、分片、RIP和OSPF的实现、<strong>多看看题</strong><br>路由器构成不考，看看就行<br>0压缩怎么实现、多播<br>概念题：VPN、NAT、MPLS<br>接口与网段的关系（4-55）<br>常用协议对应的端口号<br>TCP：为什么要三次握手及握手过程<br>套接字：UDP二元组<br>TCP格式以及概念的意思，可靠传输不是考点<br>填空+</p>
<h1 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h1><h2 id="计算机网络定义及特点"><a href="#计算机网络定义及特点" class="headerlink" title="计算机网络定义及特点"></a>计算机网络定义及特点</h2><h3 id="网络定义"><a href="#网络定义" class="headerlink" title="网络定义"></a>网络定义</h3><p>泛指把人或物互联在一起的而形成的系统</p>
<p>网络的逻辑结构（拓扑结构）</p>
<h3 id="三大类网络"><a href="#三大类网络" class="headerlink" title="三大类网络"></a>三大类网络</h3><p><strong>电信网络</strong>：提供电话、电报及传真等服务</p>
<p><strong>有线电视网络</strong>：向用户传送各种电视节目</p>
<p><strong>计算机网络</strong>：使用户能在计算机之间传送数据文件</p>
<p>发展最快并起到核心作用的是计算机网络</p>
<p>三网融合指电信网络、有线电视网络融入计算机网络</p>
<h3 id="计算机网络定义"><a href="#计算机网络定义" class="headerlink" title="计算机网络定义"></a>计算机网络定义</h3><p>计算机网络也叫网络实体（在逻辑上可以抽象为：链路+结点）</p>
<p>链路：各种物理传输介质从信源到信宿之间连接的通信线路。</p>
<p>结点：中间结点（网络设备，如路由器）+边缘结点（端系统、主机、host）</p>
<p>“网关就是路由器”是错误的说法，能够充当网关的设备不止路由器一种，路由器是最常见的。</p>
<p>计算机网络的精确定义并未统一<br>较好的定义：计算机网络主要是由一些通用的、可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特定目的（例如，传送数据或视频信号）。这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用。</p>
<p>多种硬件：计算机、智能手机、智能传感器</p>
<p>多种应用：数据、语音、视频，以及今后可能出现的各种应用</p>
<h3 id="计算机网络的特点"><a href="#计算机网络的特点" class="headerlink" title="计算机网络的特点"></a>计算机网络的特点</h3><p>连通性：使上网用户之间都可以交换信息（数据，以及各种音频视频）</p>
<p>共享：指资源共享， 资源共享的含义是多方面的。可以是信息共享、软件共享，也可以是硬件共享。</p>
<h2 id="互联网概述"><a href="#互联网概述" class="headerlink" title="互联网概述"></a>互联网概述</h2><h3 id="互联网定义"><a href="#互联网定义" class="headerlink" title="互联网定义"></a>互联网定义</h3><p>互联网，特指 Internet，它起源于美国，是由数量极大的各种计算机网络互连起来而形成的一个互连网络。它采用 TCP/IP 协议族作为通信规则，是一个覆盖全球、实现全球范围内连通性和资源共享的计算机网络。</p>
<p>互联：不仅可以相互连接 而且还可以实现信息的传递。协议（http，软件概念，硬件+软件）</p>
<p>互连：相互之间有链路连接（硬件层面）</p>
<p><img src="https://i.loli.net/2020/06/07/jpJXZ6y1mIVn5U4.png" alt="互联网与互连网的区别"></p>
<p>任意把几个计算机网络互连起来（不管采用什么协议），并能够相互通信，这样构成的是一个互连网 (internet)，而不是互联网 (Internet)。</p>
<h3 id="互联网的发展阶段"><a href="#互联网的发展阶段" class="headerlink" title="互联网的发展阶段"></a>互联网的发展阶段</h3><p>第一阶段：从单个网络 ARPANET 向互联网发展的过程</p>
<p>第二阶段：建成了三级结构的互联网。 三级计算机网络，分为主干网、地区网和校园网（或企业网）。</p>
<p>第三阶段：逐渐形成了多层次 ISP 结构的互联网，出现了互联网服务提供者 ISP (Internet Service Provider)，根据提供服务的覆盖面积大小以及所拥有的IP地址数目的不同，ISP 也分成为不同层次的 ISP：主干 ISP、地区 ISP和本地ISP。</p>
<h2 id="互联网组成"><a href="#互联网组成" class="headerlink" title="互联网组成"></a>互联网组成</h2><h3 id="边缘部分"><a href="#边缘部分" class="headerlink" title="边缘部分"></a>边缘部分</h3><p>由所有连接在互联网上的主机组成。这部分是用户直接使用的，用来进行通信（传送数据、音频或视频）和资                    源共享。</p>
<p>处在互联网边缘的部分就是连接在互联网上的所有的主机。这些主机又称为端系统 (end system)。端系统在功能上可能有很大的差别</p>
<p>端系统之间通信，即“主机 A 的某个进程和主机 B 上的另一个进程进行通信”。简称为“计算机之间通信”。 </p>
<h3 id="端系统之间的通信方式"><a href="#端系统之间的通信方式" class="headerlink" title="端系统之间的通信方式"></a>端系统之间的通信方式</h3><h4 id="客户-服务器方式（C-S方式）"><a href="#客户-服务器方式（C-S方式）" class="headerlink" title="客户-服务器方式（C/S方式）"></a>客户-服务器方式（C/S方式）</h4><p>即 Client/Server 方式，简称为 C/S 方式。</p>
<p>客户 (client) 和服务器 (server) 都是指通信中所涉及的两个应用进程。</p>
<p>客户-服务器方式所描述的是进程之间服务和被服务的关系。</p>
<p>客户是服务的请求方，服务器是服务的提供方，服务请求方和服务提供方都要使用网络核心部分所提供的服务。</p>
<p>客户与服务器的通信关系建立后，通信可以是双向的，客户和服务器都可发送和接收数据。</p>
<h4 id="对等方式（P2P方式）"><a href="#对等方式（P2P方式）" class="headerlink" title="对等方式（P2P方式）"></a>对等方式（P2P方式）</h4><p>即 Peer-to-Peer 方式 ，简称为 P2P 方式。</p>
<p>对等连接是指两个主机在通信时并不区分哪一个是服务请求方还是服务提供方，对等连接方式从本质上看仍然是使用客户服务器方式，只是对等连接中的每一个主机既是客户又是服务器。</p>
<p>只要两个主机都运行了对等连接软件 ( P2P 软件) ，它们就可以进行平等的、对等连接通信。</p>
<p>双方都可以下载对方已经存储在硬盘中的共享文档。 </p>
<p>对等连接工作方式可支持大量对等用户（如上百万个）同时工作。</p>
<h3 id="核心部分"><a href="#核心部分" class="headerlink" title="核心部分"></a>核心部分</h3><p>由大量网络和连接这些网络的路由器组成。这部分是为边缘部分提供服务的（提供连通性和交换）。</p>
<p>网络核心部分是互联网中最复杂的部分。</p>
<p>网络中的核心部分要向网络边缘中的大量主机提供连通性，使边缘部分中的任何一个主机都能够向其他主机通信（即传送或接收各种形式的数据）。</p>
<p>在网络核心部分起特殊作用的是路由器 (router)。</p>
<p>路由器是实现分组交换 (packet switching) 的关键构件，其任务是转发收到的分组，这是网络核心部分最重要的功能。</p>
<h3 id="典型交换技术"><a href="#典型交换技术" class="headerlink" title="典型交换技术"></a>典型交换技术</h3><h4 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h4><p>在路由器中的输入和输出端口之间没有直接连线。</p>
<p>路由器处理分组的过程是：</p>
<p>把收到的分组先放入缓存（暂时存储）；</p>
<p>查找转发表，找出到某个目的地址应从哪个端口转发；</p>
<p>把分组送到适当的端口转发出去。</p>
<p>主机是为用户进行信息处理的，并向网络发送分组，从网络接收分组。路由器对分组进行存储转发，最后把分组交付目的主机。</p>
<p>路由器的每个接口连接一个网络，每个接口都有一个IP地址，所有接口的IP地址肯定是不同的，内部的路由表记录了目标网段和接口的对应关系</p>
<h4 id="电路交换"><a href="#电路交换" class="headerlink" title="电路交换"></a>电路交换</h4><p>2 部电话机只需要用 1 对电线直接连接就能够互相通话。</p>
<p>5 部电话机两两直接相连，需 10 对电线。</p>
<p>N 部电话机两两直接相连，需 N(N –1)/2 对电线。这种直接连接方法所需要的电线对的数量与电话机数量的平方<br>$$<br>N^2<br>$$<br>成正比。</p>
<p>当电话机的数量增多时，就要使用交换机来完成全网的交换任务。每一部电话都直接连接到交换机上，而交换机使用交换的方法，让电话用户彼此之间可以很方便地通信。，所采用的交换方式就是电路交换 (circuit switching)。</p>
<p>电路交换必定是面向连接的，通信前需要事先确定通道，然后为双方预留资源，在通信过程中，该资源不能分配给其他结点，通信结束需要释放资源（释放链路） </p>
<h5 id="电路交换的特点"><a href="#电路交换的特点" class="headerlink" title="电路交换的特点"></a>电路交换的特点</h5><p>计算机数据具有突发性。</p>
<p>这导致在传送计算机数据时，通信线路的利用率很低（用来传送数据的时间往往不到 10% 甚至不到 1% ）。</p>
<h5 id="电路交换的三个阶段"><a href="#电路交换的三个阶段" class="headerlink" title="电路交换的三个阶段"></a>电路交换的三个阶段</h5><p>建立连接：建立一条专用的物理通路，以保证双方通话时所需的通信资源在通信时不会被其他用户占用；</p>
<p>通信：主叫和被叫双方就能互相通电话；</p>
<p>释放连接：释放刚才使用的这条专用的物理通路（释放刚才占用的所有通信资源）。</p>
<h4 id="分组交换"><a href="#分组交换" class="headerlink" title="分组交换"></a>分组交换</h4><p>分组交换则采用存储转发技术，存储转发的对象是分组（数据包）</p>
<h5 id="分组交换过程"><a href="#分组交换过程" class="headerlink" title="分组交换过程"></a>分组交换过程</h5><p>在发送端，先把较长的报文划分成较短的、固定长度的数据段。</p>
<p>每一个数据段前面添加上首部构成分组 (packet)。 </p>
<p>分组交换网以“分组”作为数据传输单元。</p>
<p>依次把各分组发送到接收端</p>
<p>接收端收到分组后剥去首部还原成报文。</p>
<p>最后，在接收端把收到的数据恢复成为原来的报文。</p>
<p>即封装到解封装的过程</p>
<p><strong>需要注意的是</strong>：数据的重组必须在目标计算机上完成，不能在中间路由器上完成，因为只有端主机才具备五层协议栈，而路由器只有三层协议栈，不具备解封装的能力</p>
<h5 id="分组交换的传输单元"><a href="#分组交换的传输单元" class="headerlink" title="分组交换的传输单元"></a>分组交换的传输单元</h5><p>每一个分组的首部都含有地址（诸如目的地址和源地址）等控制信息。</p>
<p>分组交换网中的结点交换机根据收到的分组首部中的地址信息，把分组转发到下一个结点交换机。</p>
<p>每个分组在互联网中独立地选择传输路径。</p>
<p>用这样的存储转发方式，最后分组就能到达最终目的地。</p>
<h5 id="分组交换的优点"><a href="#分组交换的优点" class="headerlink" title="分组交换的优点"></a>分组交换的优点</h5><table>
<thead>
<tr>
<th><strong>优点</strong></th>
<th align="center"><strong>所采用的手段</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>高效</strong></td>
<td align="center">在分组传输的过程中动态分配传输带宽，对通信链路是逐段占用。</td>
</tr>
<tr>
<td><strong>灵活</strong></td>
<td align="center">为每一个分组独立地选择最合适的转发路由。</td>
</tr>
<tr>
<td><strong>迅速</strong></td>
<td align="center">以分组作为传送单位，可以不先建立连接就能向其他主机发送分组。</td>
</tr>
<tr>
<td><strong>可靠</strong></td>
<td align="center">保证可靠性的网络协议；分布式多路由的分组交换网，使网络有很好的生存性。</td>
</tr>
</tbody></table>
<h5 id="分组交换的问题"><a href="#分组交换的问题" class="headerlink" title="分组交换的问题"></a>分组交换的问题</h5><p>分组在各结点存储转发时需要排队，这就会造成一定的时延。 </p>
<p>分组必须携带的首部（里面有必不可少的控制信息）也造成了一定的开销。 </p>
<h4 id="报文交换"><a href="#报文交换" class="headerlink" title="报文交换"></a>报文交换</h4><h4 id="三种交换方式比较"><a href="#三种交换方式比较" class="headerlink" title="三种交换方式比较"></a>三种交换方式比较</h4><p><img src="https://i.loli.net/2020/06/07/y8Z3o4IBpHAg1TL.png" alt="三种交换方式"></p>
<p>若要连续传送大量的数据，且其传送时间远大于连接建立时间，则电路交换的传输速率较快。</p>
<p>报文交换和分组交换不需要预先分配传输带宽，在传送突发数据时可提高整个网络的信道利用率。</p>
<p>由于一个分组的长度往往远小于整个报文的长度，因此分组交换比报文交换的时延小，同时也具有更好的灵活性。</p>
<p>互联网的核心部分采用了分组交换技术。</p>
<h2 id="计算机网络在我国的发展（记住CNNIC）"><a href="#计算机网络在我国的发展（记住CNNIC）" class="headerlink" title="计算机网络在我国的发展（记住CNNIC）"></a>计算机网络在我国的发展（记住CNNIC）</h2><p>1980 年，铁道部开始进行计算机联网实验。<br>1989 年 11 月，我国第一个公用分组交换网 CNPAC 建成运行。<br>1994 年 4 月 20 日，我国用 64 kbit/s 专线正式连入互联网，我国被国际上正式承认为接入互联网的国家。<br>1994 年 5 月，中国科学院高能物理研究所设立了我国的第一个万维网服务器。<br>1994 年 9 月，中国公用计算机互联网 CHINANET 正式启动。</p>
<p>到目前为止，我国陆续建造了基于互联网技术的并能够和互联网互连的多个全国范围的公用计算机网络，其中规模最大的就是下面这五个：<br><strong>中国电信互联网 CHINANET（也就是原来的中国公用计算机互联网）</strong><br><strong>中国联通互联网 UNINET</strong><br><strong>中国移动互联网 CMNET</strong><br><strong>中国教育和科研计算机网 CERNET</strong><br><strong>中国科学技术网 CSTNET</strong></p>
<p>中国教育和科研计算机网 CERNET (China Education and Research NETwork) 始建于 1994 年，是我国第一个 IPv4 互联网主干网。<br>2004 年 2 月，我国的第一个下一代互联网 CNGI 的主干网 CERNET2 试验网正式开通，并提供服务。<br><strong>中国互联网络信息中心 CNNIC</strong>（记住） (ChiNa Network Information Center) 每年两次公布我国互联网的发展情况。</p>
<h2 id="计算机网络的类别"><a href="#计算机网络的类别" class="headerlink" title="计算机网络的类别"></a>计算机网络的类别</h2><p>计算机网络有多种类别。</p>
<p>典型包括：<br>按照网络的作用范围进行分类<br>按照网络的使用者进行分类<br>用来把用户接入到互联网的网络</p>
<h4 id="按照网络的作用范围分类"><a href="#按照网络的作用范围分类" class="headerlink" title="按照网络的作用范围分类"></a>按照网络的作用范围分类</h4><p><strong>广域网 WAN</strong> (Wide Area Network)：作用范围通常为几十到几千公里。<br><strong>城域网 MAN</strong> (Metropolitan Area Network)：作用距离约为 5~50 公里。<br><strong>局域网 LAN</strong> (Local Area Network) ：局限在较小的范围（如 1 公里左右）。<br><strong>个人区域网 PAN</strong> (Personal Area Network) ：范围很小，大约在 10 米左右。</p>
<p>若中央处理机之间的距离非常近（如仅 1 米的数量级甚至更小些），则一般就称之为多处理机系统，而不称它为计算机网络。 </p>
<h4 id="按照网络的使用者分类"><a href="#按照网络的使用者分类" class="headerlink" title="按照网络的使用者分类"></a>按照网络的使用者分类</h4><p><strong>公用网</strong> (public network) ：按规定交纳费用的人都可以使用的网络。因此也可称为公众网。<br><strong>专用网</strong> (private network) ：为特殊业务工作的需要而建造的网络。</p>
<p>公用网和专用网都可以提供多种服务。如传送的是计算机数据，则分别是公用计算机网络和专用计算机网络。</p>
<h4 id="用来把用户接入到互联网的网络"><a href="#用来把用户接入到互联网的网络" class="headerlink" title="用来把用户接入到互联网的网络"></a>用来把用户接入到互联网的网络</h4><p><strong>接入网 AN</strong> (Access Network)，它又称为本地接入网或居民接入网。</p>
<p>接入网是一类比较特殊的计算机网络，用于将用户接入互联网。</p>
<p>接入网本身既不属于互联网的核心部分，也不属于互联网的边缘部分。</p>
<p>接入网是从某个用户端系统到互联网中的第一个路由器（也称为边缘路由器）之间的一种网络。</p>
<p>从覆盖的范围看，很多接入网还是属于局域网。</p>
<p>从作用上看，接入网只是起到让用户能够与互联网连接的“桥梁”作用。</p>
<h2 id="计算机网络的性能"><a href="#计算机网络的性能" class="headerlink" title="计算机网络的性能"></a>计算机网络的性能</h2><p>计算机网络的性能一般是指它的几个重要的性能指标，主要包括：速率、带宽、吞吐率、时延、时延带宽积、往返时间 RTT、利用率</p>
<h4 id="速率（可能）"><a href="#速率（可能）" class="headerlink" title="速率（可能）"></a>速率（可能）</h4><p>比特（bit）是计算机中数据量的单位，也是信息论中使用的信息量的单位。</p>
<p>比特（bit）来源于 binary digit，意思是一个“二进制数字”，因此一个比特就是二进制数字中的一个 1 或 0。</p>
<p>速率是计算机网络中最重要的一个性能指标，指的是数据的传送速率，它也称为数据率 (data rate) 或比特率 (bit rate)。<br>速率的单位是 bit/s，或 kbit/s、Mbit/s、 Gbit/s等。 例如<br>$$<br>4x10^{10}  bit/s<br>$$<br>的数据率就记为 40 Gbit/s。</p>
<p>速率往往是指额定速率或标称速率，非实际运行速率。  </p>
<h4 id="带宽（可能）"><a href="#带宽（可能）" class="headerlink" title="带宽（可能）"></a>带宽（可能）</h4><p>两种不同意义：<br>“带宽”(bandwidth) 本来是指信号具有的频带宽度，其单位是赫（或千赫、兆赫、吉赫等）。</p>
<p>在计算机网络中，带宽用来表示网络中某通道传送数据的能力。表示在单位时间内网络中的某信道所能通过的“最高数据率”。单位是 bit/s，即 “比特每秒”。    </p>
<p>在“带宽”的上述两种表述中，前者为频域称谓，而后者为时域称谓，其本质是相同的。也就是说，一条通信链路的“带宽”越宽，其所能传输的“最高数据率”也越高。</p>
<h4 id="吞吐率（可能）"><a href="#吞吐率（可能）" class="headerlink" title="吞吐率（可能）"></a>吞吐率（可能）</h4><p>吞吐量 (throughput) 表示在单位时间内通过某个网络（或信道、接口）的数据量。</p>
<p>吞吐量更经常地用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据量能够通过网络。</p>
<p>吞吐量受网络的带宽或网络的额定速率的限制。  </p>
<h4 id="时延（小计算题）"><a href="#时延（小计算题）" class="headerlink" title="时延（小计算题）"></a>时延（小计算题）</h4><p>时延 (delay 或 latency) 是指数据（一个报文或分组，甚至比特）从网络（或链路）的一端传送到另一端所需的时间。<br>有时也称为延迟或迟延。</p>
<p>数据在网络中经历的总时延就是发送时延、传播时延、处理时延和排队时延之和。<br>$$<br>总时延=发送时延+传播时延+处理时延+排队时延<br>$$<br>必须指出，在总时延中，究竟是哪一种时延占主导地位，必须具体分析。</p>
<p><img src="https://i.loli.net/2020/06/07/AhtOKCYaQFZ14x2.png" alt="时延从何产生"></p>
<p>对于高速网络链路，我们提高的仅仅是数据的发送速率而不是比特在链路上的传播速率。<br>提高链路带宽减小了数据的发送时延。 </p>
<p>以下说法是错误的：<br>“在高速链路（或高带宽链路）上，比特会传送得更快些”。</p>
<p>网络中的时延由以下几个不同的部分组成：</p>
<h5 id="发送时延"><a href="#发送时延" class="headerlink" title="发送时延"></a>发送时延</h5><p>也称为传输时延。<br>发送数据时，数据帧从结点进入到传输媒体所需要的时间。<br>也就是从发送数据帧的第一个比特算起，到该帧的最后一个比特发送完毕所需的时间。<br>$$<br>发送时延=\frac {数据帧长度（bit）}{发送速率（bit/s）}<br>$$</p>
<h5 id="传播时延"><a href="#传播时延" class="headerlink" title="传播时延"></a>传播时延</h5><p>电磁波在信道中需要传播一定的距离而花费的时间。<br>发送时延与传播时延有本质上的不同。<br>信号发送速率和信号在信道上的传播速率是完全不同的概念。<br>$$<br>传播时延=\frac {信道长度（米）}{信号在信道上的传播速率（米/秒）}<br>$$</p>
<h5 id="处理时延"><a href="#处理时延" class="headerlink" title="处理时延"></a>处理时延</h5><p>主机或路由器在收到分组时，为处理分组（例如分析首部、提取数据、差错检验或查找路由）所花费的时间。</p>
<h5 id="排队时延"><a href="#排队时延" class="headerlink" title="排队时延"></a>排队时延</h5><p>分组在路由器输入输出队列中排队等待处理所经历的时延。<br>排队时延的长短往往取决于网络中当时的通信量。</p>
<h4 id="时延带宽积（可能）"><a href="#时延带宽积（可能）" class="headerlink" title="时延带宽积（可能）"></a>时延带宽积（可能）</h4><p>链路的时延带宽积又称为以比特为单位的链路长度。 </p>
<p>时延带宽积 = 传播时延 x 带宽</p>
<p><img src="https://i.loli.net/2020/06/07/OczWrxvR3I1ACwa.png" alt="时延带宽积"></p>
<h4 id="往返时间-RTT（可能）"><a href="#往返时间-RTT（可能）" class="headerlink" title="往返时间 RTT（可能）"></a>往返时间 RTT（可能）</h4><p>互联网上的信息不仅仅单方向传输，而是双向交互的。因此，有时很需要知道双向交互一次所需的时间。</p>
<p>往返时间 RTT (round-trip time) 表示从发送方发送数据开始，到发送方收到来自接收方的确认，总共经历的时间。</p>
<p>在互联网中，往返时间还包括各中间结点的处理时延、排队时延以及转发数据时的发送时延。</p>
<p>当使用卫星通信时，往返时间 RTT 相对较长，是很重要的一个性能指标。</p>
<h4 id="利用率（没考过）"><a href="#利用率（没考过）" class="headerlink" title="利用率（没考过）"></a>利用率（没考过）</h4><p>分为<strong>信道利用率</strong>和<strong>网络利用率</strong>。</p>
<p>信道利用率指出某信道有百分之几的时间是被利用的（有数据通过）。</p>
<p>完全空闲的信道的利用率是零。</p>
<p>网络利用率则是全网络的信道利用率的加权平均值。</p>
<p>信道利用率并非越高越好。当某信道的利用率增大时，该信道引起的时延也就迅速增加。</p>
<h4 id="时延与网络利用率的关系"><a href="#时延与网络利用率的关系" class="headerlink" title="时延与网络利用率的关系"></a>时延与网络利用率的关系</h4><p>根据排队论的理论，当某信道的利用率增大时，该信道引起的时延也就迅速增加。 </p>
<p>若令<br>$$<br>D_0<br>$$<br>表示网络空闲时的时延，D 表示网络当前的时延，则在适当的假定条件下，可以用下面的简单公式表示 D 和 D0 之间的关系：<br>$$<br>D=\frac {D_0}{1-U}<br>$$<br>其中U是网络利用率，数值在0到1之间</p>
<p><img src="https://i.loli.net/2020/06/07/gmu8K1boPEOqRG3.png" alt="时延与信道利用率的关系"></p>
<h2 id="计算机网络的体系结构"><a href="#计算机网络的体系结构" class="headerlink" title="计算机网络的体系结构"></a>计算机网络的体系结构</h2><p>开放系统互连参考模型 OSI/RM</p>
<p>法律上的 (de jure) 国际标准 OSI 并没有得到市场的认可。<br>非国际标准 TCP/IP 却获得了最广泛的应用。TCP/IP 常被称为事实上的 (de facto) 国际标准。</p>
<h3 id="网络协议-network-protocol"><a href="#网络协议-network-protocol" class="headerlink" title="网络协议 (network protocol)"></a>网络协议 (network protocol)</h3><p>简称为协议，是为进行网络中的数据交换而建立的规则、标准或约定。 </p>
<h4 id="网络协议的三个组成要素-（可能）"><a href="#网络协议的三个组成要素-（可能）" class="headerlink" title="网络协议的三个组成要素 （可能）"></a>网络协议的三个组成要素 （可能）</h4><p><strong>语法</strong>：数据与控制信息的结构或格式 。<br><strong>语义</strong>：需要发出何种控制信息，完成何种动作以及做出何种响应。<br><strong>同步</strong>：事件实现顺序的详细说明。 </p>
<p>由此可见，网络协议是计算机网络的不可缺少的组成部分。</p>
<h4 id="协议的两种形式"><a href="#协议的两种形式" class="headerlink" title="协议的两种形式"></a>协议的两种形式</h4><p>一种是使用便于人来阅读和理解的<strong>文字描述</strong>。<br>另一种是使用让计算机能够理解的<strong>程序代码</strong>。</p>
<p>这两种不同形式的协议都必须能够对网络上信息交换过程做出精确的解释。</p>
<p><img src="https://i.loli.net/2020/06/07/VunHAQoB1cOsvbU.png" alt="协议"></p>
<p><img src="https://i.loli.net/2020/06/07/YT4yCXsHWx1StBj.png" alt="协议"></p>
<p><img src="https://i.loli.net/2020/06/07/ixAXjdVKL6y78IU.png" alt="协议"></p>
<h3 id="分层的优缺点"><a href="#分层的优缺点" class="headerlink" title="分层的优缺点"></a>分层的优缺点</h3><h4 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h4><p>各层之间是独立的</p>
<p>灵活性好</p>
<p>结构上可分割开</p>
<p>易于实现和维护</p>
<p>能促进标准化工作</p>
<h4 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h4><p>降低效率</p>
<p>有些功能会在不同的层次中重复出现，因而产生了额外开销</p>
<h3 id="各层的功能"><a href="#各层的功能" class="headerlink" title="各层的功能"></a>各层的功能</h3><h4 id="差错控制"><a href="#差错控制" class="headerlink" title="差错控制"></a>差错控制</h4><p>使相应层次对等方的通信更加可靠。</p>
<h4 id="流量控制"><a href="#流量控制" class="headerlink" title="流量控制"></a>流量控制</h4><p>发送端的发送速率必须使接收端来得及接收，不要太快。</p>
<h4 id="分段和重装"><a href="#分段和重装" class="headerlink" title="分段和重装"></a>分段和重装</h4><p>发送端将要发送的数据块划分为更小的单位，在接收端将其还原。</p>
<h4 id="复用和分用"><a href="#复用和分用" class="headerlink" title="复用和分用"></a>复用和分用</h4><p>发送端几个高层会话复用一条低层的连接，在接收端再进行分用。</p>
<h4 id="连接建立和释放"><a href="#连接建立和释放" class="headerlink" title="连接建立和释放"></a>连接建立和释放</h4><p>交换数据前先建立一条逻辑连接，数据传送结束后释放连接。</p>
<h3 id="五层协议体系结构（重要）"><a href="#五层协议体系结构（重要）" class="headerlink" title="五层协议体系结构（重要）"></a>五层协议体系结构（重要）</h3><p>OSI 的七层协议体系结构的概念清楚，理论也较完整，但它既复杂又不实用。<br>TCP/IP 是四层体系结构：<strong>应用层、运输层、网际层和网络接口层</strong>。<br>但最下面的网络接口层并没有具体内容。<br>因此往往采取折中的办法，即综合 OSI 和 TCP/IP 的优点，采用一种只有五层协议的体系结构 。 </p>
<p><strong>考试时按五层协议体系结构来</strong></p>
<p><img src="https://i.loli.net/2020/06/07/GoOZvNLFMy5WTSJ.png" alt="三种网络体系结构"></p>
<p><img src="https://i.loli.net/2020/06/07/ZAWiS4KuXRGzNIM.png" alt="发送数据的过程"></p>
<p><img src="https://i.loli.net/2020/06/07/wsKbVALdy857Xmg.png" alt="发送数据的过程"></p>
<p><img src="https://i.loli.net/2020/06/07/Niz1Bk3qvVgXyoI.png" alt="发送数据的过程"></p>
<p><img src="https://i.loli.net/2020/06/07/kF5CKdMSUxQgtPL.png" alt="发送数据的过程"></p>
<p><img src="https://i.loli.net/2020/06/07/iZQJf6rEhAqY59o.png" alt="发送数据的过程"></p>
<p><img src="https://i.loli.net/2020/06/07/C6g4y1kKOoBxusZ.png" alt="发送数据的过程"></p>
<p>到达主机2后剥去各层首部向上交付数据</p>
<p><img src="https://i.loli.net/2020/06/07/ut6YUOfAPnkWTs8.png" alt="发送数据的过程"></p>
<p>OSI 参考模型把对等层次之间传送的数据单位称为该层的协议数据单元 PDU (Protocol Data Unit)。这个名词现已被许多非 OSI 标准采用。</p>
<p>任何两个同样的层次把数据（即数据单元加上控制信息）通过水平虚线直接传递给对方。这就是所谓的“<strong>对等层</strong>”(peer layers)之间的通信。</p>
<p>各层协议实际上就是在各个对等层之间传递数据时的各项规定。</p>
<h3 id="TCP-IP体系结构（重要）"><a href="#TCP-IP体系结构（重要）" class="headerlink" title="TCP/IP体系结构（重要）"></a>TCP/IP体系结构（重要）</h3><p><img src="https://i.loli.net/2020/06/07/FZqdXrBsSC5what.png" alt="TCP/IP体系结构"></p>
<p><img src="https://i.loli.net/2020/06/07/nMxKiDpHr6XAl7a.png" alt="TCP/IP体系结构"></p>
<p><img src="https://i.loli.net/2020/06/07/fJam9FDeVIQTuoZ.png" alt="TCP/IP体系结构"></p>
<p>分析过程：</p>
<table>
<thead>
<tr>
<th>三次封装</th>
<th>二次封装</th>
<th>一次封装</th>
<th>Data（应用层数据）</th>
</tr>
</thead>
<tbody><tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>一次封装：主要是源端口、目标端口<br>网络层（路由检索，不提供可靠的数据传输，可靠传输是由传输层的TCP提供的）</p>
<p>二次封装：主要是源IP、目标IP<br>IP数据包，数据包，分组（packet）<br>数据链路层（数据单元是数据帧，frame，差错检验）</p>
<p>三次封装：主要是源MAC、目标MAC</p>
<p><strong>需要注意的是</strong>：多次重新封装时源IP和目标IP是永远不变的，而变化的是源MAC和目标MAC</p>
<h3 id="一些概念"><a href="#一些概念" class="headerlink" title="一些概念"></a>一些概念</h3><p><strong>实体</strong> (entity) 表示任何可发送或接收信息的硬件或软件进程。<br><strong>协议</strong>是控制两个对等实体进行通信的规则的集合。<br>在协议的控制下，两个对等实体间的通信使得本层<strong>能够向上一层提供服务</strong>。<br>要实现本层协议，还需要<strong>使用下层所提供的服务</strong>。 </p>
<p>协议的实现保证了能够向上一层提供服务。<br>本层的服务用户<strong>只能看见服务而无法看见下面的协议</strong>。即下面的协议对上面的服务用户是<strong>透明</strong>的。<br>协议是“<strong>水平的</strong>”，即协议是控制对等实体之间通信的规则。<br>服务是“<strong>垂直的</strong>”，即服务是由下层向上层通过层间接口提供的。<br>上层使用<strong>服务原语</strong>获得下层所提供的服务。</p>
<p>报文（message）<br>报文段（segment）：应用层数据封装了TCP协议形成的<br>数据报（Datagram）：应用层数据封装了UDP协议形成的</p>
<h3 id="服务访问点"><a href="#服务访问点" class="headerlink" title="服务访问点"></a>服务访问点</h3><p>同一系统相邻两层的实体进行交互的地方，称为<strong>服务访问点 SAP</strong> (Service Access Point)。<br>服务访问点SAP是一个抽象的概念，它实际上就是一个逻辑接口。<br>OSI把层与层之间交换的数据的单位称为<strong>服务数据单元 SDU</strong> (Service Data Unit)。<br>SDU 可以与 PDU 不一样，例如，可以是多个 SDU 合成为一个 PDU，也可以是一个 SDU 划分为几个 PDU。<br>$$<br>PDU(N) = SDU(N - 1)\<br>SDU(N) = PDU(N + 1)<br>$$<br><img src="https://i.loli.net/2020/06/07/5KMZ1znRwkuQAtc.png" alt="服务访问点"></p>
<h1 id="物理层"><a href="#物理层" class="headerlink" title="物理层"></a>物理层</h1><h2 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h2><p>物理层考虑的是怎样才能在连接各种计算机的传输媒体上传输数据比特流，而不是指具体的传输媒体。<br>物理层的作用是要尽可能地屏蔽掉不同传输媒体和通信手段的差异。<br>用于物理层的协议也常称为物理层规程 (procedure)。</p>
<p>通信的本质目的是传送<strong>消息</strong></p>
<h3 id="物理层的主要任务（特性）"><a href="#物理层的主要任务（特性）" class="headerlink" title="物理层的主要任务（特性）"></a>物理层的主要任务（特性）</h3><p>主要任务：确定与传输媒体的接口的一些特性。</p>
<p><strong>机械特性</strong> ：指明接口所用接线器的形状和尺寸、引线数目和排列、固定和锁定装置等。<br><strong>电气特性</strong>：指明在接口电缆的各条线上出现的电压的范围。<br><strong>功能特性</strong>：指明某条线上出现的某一电平的电压的意义。<br><strong>过程特性</strong> ：指明对于不同功能的各种可能事件的出现顺序。 </p>
<h2 id="数据通信的基础知识"><a href="#数据通信的基础知识" class="headerlink" title="数据通信的基础知识"></a>数据通信的基础知识</h2><h3 id="数据通信系统模型"><a href="#数据通信系统模型" class="headerlink" title="数据通信系统模型"></a>数据通信系统模型</h3><p>一个数据通信系统包括三大部分：源系统（或发送端、发送方）、传输系统（或传输网络）和目的系统（或接收端、接收方）。</p>
<p><img src="https://i.loli.net/2020/06/07/XySnEA7ambuPBrM.png" alt="数据通信系统模型"></p>
<h3 id="常用术语（奈氏准则）"><a href="#常用术语（奈氏准则）" class="headerlink" title="常用术语（奈氏准则）"></a>常用术语（奈氏准则）</h3><p><strong>数据</strong> (data) —— 运送消息的实体。<br><strong>信号</strong> (signal) —— 数据的电气的或电磁的表现。<br><strong>模拟信号</strong> (analogous signal) —— 代表消息的参数的取值是连续的。<br><strong>数字信号</strong> (digital signal) —— 代表消息的参数的取值是离散的。<br><strong>码元</strong> (code) —— 在使用时间域（或简称为时域）的波形表示数字信号时，代表不同离散数值的基本波形。</p>
<p>二进制码元，有两种脉冲变化形式，表示0或1，所以只能携带1bit信息</p>
<p>四进制码元，有四种不同的脉冲形式，能携带2bit信息</p>
<p>同理八进制码元可以携带3bit信息</p>
<p><strong>奈氏准则</strong>，理想信道下码元的最高传输速率是2wBaud，w指的是信道带宽，Baud是码元传输的速率单位。</p>
<p>如1Baud=1码元/秒。2wBaud具体为每赫兹带宽的理想低通道信道的码元传输的最高速率是2码元/秒。</p>
<p>例如信道带宽是200Hz，则每秒最多可以传输2*200=400码元，也就是400Baud。</p>
<p>例如，信道传输速率是64kbps，可以推算出在无干扰情况下的信道带宽是64/2=32kHz。</p>
<h3 id="常用编码方式（重要）"><a href="#常用编码方式（重要）" class="headerlink" title="常用编码方式（重要）"></a>常用编码方式（重要）</h3><p><strong>不归零制</strong>（NRZ）：正电平代表 1，负电平代表 0。<br><strong>归零制</strong>（RZ）：正脉冲代表 1，负脉冲代表 0。<br><strong>反向不归零编码（NRZI）</strong>：信号电平翻转表示0，信号电平不变表示1，判断信号相较于上一个状态是否反转。<br><strong>曼彻斯特编码</strong>：位周期中心的向上跳变代表 0，位周期中心的向下跳变代表 1。但也可反过来定义。<br><strong>差分曼彻斯特编码</strong>：在每一位的中心处始终都有跳变。位开始边界有跳变代表 0，而位开始边界没有跳变代表 1。<br><strong>曼彻斯特编码缺点</strong>是：它所占的频带宽度比原始的基带信号增加了一倍。</p>
<p><img src="https://i.loli.net/2020/06/07/ur5TNZtQacHOhxM.png" alt="常见编码方式"></p>
<p>反向不归零编码表示00100010(B)，则信号波形如下图所示：</p>
<p><img src="https://i.loli.net/2020/06/07/gRQy496Cn3kdpzB.png" alt="NRZI编码"></p>
<p><strong>从信号波形中来看</strong>，曼彻斯特 (Manchester) 编码和差分曼彻斯特编码产生的信号频率比不归零制高。<br><strong>从自同步能力来看</strong>，不归零制不能从信号波形本身中提取信号时钟频率（这叫做没有自同步能力），<strong>而曼彻斯特编码和差分曼彻斯特编码具有自同步能力。</strong></p>
<h3 id="信道基本概念"><a href="#信道基本概念" class="headerlink" title="信道基本概念"></a>信道基本概念</h3><p>*<em>信道 *</em>—— 一般用来表示向某一个方向传送信息的媒体。</p>
<p><strong>单向通信</strong>（单工通信）——只能有一个方向的通信而没有反方向的交互，广播和电视<br><strong>双向交替通信</strong>（半双工通信）——通信的双方都可以发送信息，但不能双方同时发送(当然也就不能同时接收)，HUB（集线器）<br><strong>双向同时通信</strong>（全双工通信）——通信的双方可以同时发送和接收信息。 路由器</p>
<p><strong>基带信号（即基本频带信号）</strong>—— 来自信源的信号。像计算机输出的代表各种文字或图像文件的数据信号都属于基带信号。<br>基带信号往往包含有较多的低频成分，甚至有直流成分，而许多信道并不能传输这种低频分量或直流分量。因此必须对基带信号进行<strong>调制</strong>(modulation)。 </p>
<p><strong>调制</strong>分为两大类：<br><strong>基带调制</strong>：仅对基带信号的波形进行变换，使它能够与信道特性相适应。变换后的信号仍然是基带信号。把这种过程称为编码 (coding)。<br><strong>带通调制</strong>：使用载波 (carrier)进行调制，把基带信号的频率范围搬移到较高的频段，并转换为模拟信号，这样就能够更好地在模拟信道中传输（即仅在一段频率范围内能够通过信道）。<br><strong>带通信号</strong>：经过载波调制后的信号。</p>
<p>最基本的<strong>二元制调制</strong>方法有以下几种：<br><strong>调幅(AM)</strong>：载波的振幅随基带数字信号而变化。<br><strong>调频(FM)</strong>：载波的频率随基带数字信号而变化。<br><strong>调相(PM)</strong> ：载波的初始相位随基带数字信号而变化。 </p>
<p><img src="https://i.loli.net/2020/06/07/FCQlPOLI1BXfV67.png" alt="带通调制方法"></p>
<h3 id="信道的极限容量"><a href="#信道的极限容量" class="headerlink" title="信道的极限容量"></a>信道的极限容量</h3><p>从概念上讲，限制码元在信道上的传输速率的因素有以下两个：<br><strong>信道能够通过的频率范围</strong><br><strong>信噪比</strong></p>
<p>在任何信道中，码元传输的速率是有上限的，否则就会出现码间串扰的问题，使接收端对码元的判决（即识别）成为不可能。</p>
<p>如果信道的频带越宽，也就是能够通过的信号高频分量越多，那么就可以用更高的速率传送码元而不出现码间串扰。</p>
<h4 id="信噪比（香农公式，计算题）"><a href="#信噪比（香农公式，计算题）" class="headerlink" title="信噪比（香农公式，计算题）"></a>信噪比（香农公式，计算题）</h4><p>噪声存在于所有的电子设备和通信信道中。<br>噪声是随机产生的，它的瞬时值有时会很大。因此噪声会使接收端对码元的判决产生错误。<br>但噪声的影响是相对的。如果信号相对较强，那么噪声的影响就相对较小。</p>
<p>信噪比就是信号的平均功率和噪声的平均功率之比。常记为S/N，并用分贝 (dB) 作为度量单位。即：<br>$$<br>信噪比(dB) = 10 log_{10}(S/N ) (dB)<br>$$<br>例如，当S/N=10时，信噪比为10dB，而当S/N=1000时，信噪比为30dB。 </p>
<p>传统的电话线路的带宽是3.1KHz（人耳能够识别的频率范围20-16000Hz，电话线路只保留300-3400Hz范围内的声音信号就能听清）电话线路的信噪比是30dB，求传统电话线路的极限传输速率是多少？</p>
<p><img src="https://i.loli.net/2020/06/07/h2Uw53DeTouPIrY.png" alt="香农公式运用"></p>
<p>1984年，香农 (Shannon) 用信息论的理论推导出了带宽受限且有高斯白噪声干扰的信道的极限、无差错的信息传输速率（<strong>香农公式</strong>）。<br>信道的极限信息传输速率 C 可表达为：<br>$$<br>C = W log_2(1+S/N)    (bit/s)<br>$$<br>其中：W 为信道的带宽（以 Hz 为单位）<br>            S 为信道内所传信号的平均功率；<br>            N 为信道内部的高斯噪声功率。 </p>
<p>香农公式表明：<br>信道的带宽或信道中的信噪比越大，则信息的极限传输速率就越高。<br>只要信息传输速率低于信道的极限信息传输速率，就一定可以找到某种办法来实现无差错的传输。<br>若信道带宽 W 或信噪比 S/N 没有上限（当然实际信道不可能是这样的），则信道的极限信息传输速率 C 也就没有上限。<br>实际信道上能够达到的信息传输速率要比香农的极限传输速率低不少。 </p>
<p>需要注意的是：<br>对于频带宽度已确定的信道，如果信噪比不能再提高了，并且码元传输速率也达到了上限值，那么还有办法提高信息的传输速率。<br>这就是：用编码的方法让每一个码元携带更多比特的信息量。 </p>
<h3 id="正交振幅调制QAM（应该不考）"><a href="#正交振幅调制QAM（应该不考）" class="headerlink" title="正交振幅调制QAM（应该不考）"></a>正交振幅调制QAM（应该不考）</h3><p>正交振幅调制 QAM (Quadrature Amplitude Modulation)<br>为了达到更高的信息传输速率，必须采用技术上更为复杂的多元制的振幅相位混合调制方法。</p>
<p>例如：<br>可供选择的相位有 12 种，而对于每一种相位有 1 或 2 种振幅可供选择。总共有 16 种组合，即 16 个码元。<br>由于 4 bit 编码共有 16 种不同的组合，因此这 16 个点中的每个点可对应于一种 4 bit 的编码。数据传输率可提高 4 倍。</p>
<p>不是码元越多越好。若每一个码元可表示的比特数越多，则在接收端进行解调时要正确识别每一种状态就越困难，出错率增加。  </p>
<h2 id="物理层的传输媒体（考概念，区分是否导引）"><a href="#物理层的传输媒体（考概念，区分是否导引）" class="headerlink" title="物理层的传输媒体（考概念，区分是否导引）"></a>物理层的传输媒体（考概念，区分是否导引）</h2><p><strong>传输媒体也称为传输介质或传输媒介</strong>，它就是数据传输系统中在发送器和接收器之间的物理通路。<br>传输媒体可分为两大类，即导引型传输媒体和非导引型传输媒体。<br><strong>在导引型传输媒体中</strong>，电磁波被导引沿着固体媒体（铜线或光纤）传播。<br><strong>非导引型传输媒体就是指自由空间</strong>。在非导引型传输媒体中，电磁波的传输常称为无线传输。</p>
<p><img src="https://i.loli.net/2020/06/07/1X6B5MHRuQcdaCl.png" alt="频谱图"></p>
<h3 id="导引型传输媒体"><a href="#导引型传输媒体" class="headerlink" title="导引型传输媒体"></a>导引型传输媒体</h3><p>网线（RJ45）<br>电话线（RJ11）</p>
<h4 id="双绞线"><a href="#双绞线" class="headerlink" title="双绞线"></a>双绞线</h4><p>最常用的传输媒体。<br>模拟传输和数字传输都可以使用双绞线，其通信距离一般为几到十几公里。<br><strong>屏蔽双绞线 STP (Shielded Twisted Pair)</strong>：带金属屏蔽层<br>*<em>无屏蔽双绞线 UTP (Unshielded Twisted Pair) *</em></p>
<p><img src="https://i.loli.net/2020/06/07/Io7vhk4e6cyijqW.png" alt="双绞线示意图"></p>
<p>双绞线线序：</p>
<p>1.<strong>两端线序相同</strong>，用于不同设备，比如一端连接主机，另一端连接交换机或集线器<br>2.<strong>两端线序不同</strong>，如一端是568A，另一端是568B，用于连接两端相同类型的设备，直接将两台计算机通过网线相连</p>
<p>双绞线标准：（不考）</p>
<p>1991 年，美国电子工业协会 EIA 和电信行业协会联合发布了一个用于室内传送数据的无屏蔽双绞线和屏蔽双绞线的标准 EIA/TIA-568。<br>1995 年将布线标准更新为 EIA/TIA-568-A。<br>此标准规定了 5 个种类的 UTP 标准（从 1 类线到 5 类线）。<br>对传送数据来说，现在最常用的 UTP 是5类线（Category 5 或 CAT5）。</p>
<table>
<thead>
<tr>
<th><strong>绞合线类别</strong></th>
<th><strong>带宽</strong></th>
<th><strong>线缆特点</strong></th>
<th><strong>典型应用</strong></th>
</tr>
</thead>
<tbody><tr>
<td><strong>3</strong></td>
<td><strong>16 MHz</strong></td>
<td><strong>2 对 4 芯双绞线</strong></td>
<td><strong>模拟电话；曾用于传统</strong>以太网（10 Mbit/s）</td>
</tr>
<tr>
<td><strong>4</strong></td>
<td><strong>20 MHz</strong></td>
<td><strong>4 对 8 芯双绞线</strong></td>
<td><strong>曾用于令牌局域网</strong></td>
</tr>
<tr>
<td><strong>5</strong></td>
<td><strong>100MHz</strong></td>
<td><strong>与 4 类相比增加了绞合度</strong></td>
<td><strong>传输速率不超过100Mbit/s</strong> 的<strong>应用</strong></td>
</tr>
<tr>
<td><strong>5E</strong> (超5类)</td>
<td><strong>125MHz</strong></td>
<td><strong>与 5 类相比衰减更小</strong></td>
<td><strong>传输速率不超过1 Gbit/s 的应用</strong></td>
</tr>
<tr>
<td><strong>6</strong></td>
<td><strong>250MHz</strong></td>
<td><strong>与 5 类相比改善了串扰等性能</strong></td>
<td><strong>传输速率</strong>高于<strong>1</strong> <strong>Gbit</strong>/s <strong>的</strong>应用</td>
</tr>
<tr>
<td><strong>7</strong></td>
<td><strong>600MHz</strong></td>
<td><strong>使用屏蔽双绞线</strong></td>
<td><strong>传输速率高于 10 Gbit</strong>/s的<strong>应用</strong></td>
</tr>
</tbody></table>
<h4 id="同轴电缆"><a href="#同轴电缆" class="headerlink" title="同轴电缆"></a>同轴电缆</h4><p>同轴电缆具有很好的抗干扰特性，被广泛用于传输较高速率的数据。<br>同轴电缆的带宽取决于电缆的质量。<br><strong>50 Ω 同轴电缆 —— LAN / 数字传输常用</strong><br><strong>75 Ω 同轴电缆 —— 有线电视 / 模拟传输常用</strong></p>
<p><img src="https://i.loli.net/2020/06/07/XrtWbZ613zVOl7A.png" alt="同轴电缆结构图"></p>
<h4 id="光缆（不重要）"><a href="#光缆（不重要）" class="headerlink" title="光缆（不重要）"></a>光缆（不重要）</h4><p>光纤是光纤通信的传输媒体。<br>由于可见光的频率非常高，约为 10^8 MHz 的量级，因此一个光纤通信系统的传输带宽远远大于目前其他各种传输媒体的带宽。</p>
<p><img src="https://i.loli.net/2020/06/07/uTQMSYP715EXvO9.png" alt="光纤原理图"></p>
<p>当光线从高折射率的媒体射向低折射率的媒体时，其折射角将大于入射角。因此，如果入射角足够大，就会出现全反射，光也就沿着光纤传输下去。</p>
<p><img src="https://i.loli.net/2020/06/07/Qh7bC61OZnNsjUH.png" alt="光纤原理图"></p>
<p>只要从纤芯中射到纤芯表面的光线的入射角大于某个临界角度，就可产生全反射。</p>
<p><strong>多模光纤</strong><br>可以存在多条不同角度入射的光线在一条光纤中传输。这种光纤就称为多模光纤。</p>
<p><strong>单模光纤</strong><br>若光纤的直径减小到只有一个光的波长，则光纤就像一根波导那样，它可使光线一直向前传播，而不会产生多次反射。这样的光纤称为单模光纤。</p>
<p><img src="https://i.loli.net/2020/06/07/FXvGOV43TSQUbwE.png" alt="多模光纤与单模光纤比较"></p>
<p>光纤通信中使用的光波的波段：<br>常用的三个波段的中心分别位于 850 nm, 1300 nm 和 1550 nm。<br>所有这三个波段都具有 25000~30000 GHz 的带宽，可见光纤的通信容量非常大。</p>
<p>光纤的优点：<br>1.通信容量非常大。<br>2.传输损耗小，中继距离长。<br>3.抗雷电和电磁干扰性能好。<br>4.无串音干扰，保密性好。<br>5.体积小，重量轻。</p>
<h3 id="非导引型传输媒体（不重要）"><a href="#非导引型传输媒体（不重要）" class="headerlink" title="非导引型传输媒体（不重要）"></a>非导引型传输媒体（不重要）</h3><p>将自由空间称为“非导引型传输媒体”。<br>无线传输所使用的频段很广。<br>短波通信（即高频通信）主要是靠电离层的反射，但短波信道的通信质量较差，传输速率低。<br>微波在空间主要是直线传播。</p>
<p>传统微波通信有两种方式：<br><strong>1.地面微波接力通信</strong><br><strong>2.卫星通信</strong></p>
<p><img src="https://i.loli.net/2020/06/07/V6niYzTxOWC8FLq.png" alt="无线局域网使用的ISM频段"></p>
<h2 id="信道复用技术（重要）"><a href="#信道复用技术（重要）" class="headerlink" title="信道复用技术（重要）"></a>信道复用技术（重要）</h2><p><strong>复用</strong> (multiplexing) 是通信技术中的基本概念。<br>它允许用户使用一个共享信道进行通信，降低成本，提高利用率。</p>
<p><img src="https://i.loli.net/2020/06/07/TIhselBAmnq2X1Q.png" alt="信道复用示意图"></p>
<h3 id="频分复用FDM"><a href="#频分复用FDM" class="headerlink" title="频分复用FDM"></a>频分复用FDM</h3><p>Frequency Division Multiplexing<br>将整个带宽分为多份，用户在分配到一定的频带后，在通信过程中自始至终都占用这个频带。<br><strong>频分复用</strong>的所有用户在同样的时间<strong>占用不同的带宽资源</strong>（请注意，这里的“带宽”是频率带宽而不是数据的发送速率）。 </p>
<h3 id="时分复用TDM（主要考）"><a href="#时分复用TDM（主要考）" class="headerlink" title="时分复用TDM（主要考）"></a>时分复用TDM（主要考）</h3><p>Time Division Multiplexing<br><strong>时分复用</strong>则是将时间划分为一段段等长的<strong>时分复用帧</strong>（TDM帧）。每一个时分复用的用户在每一个 TDM 帧中占用固定序号的时隙。<br>每一个用户所占用的时隙是<strong>周期性地出现</strong>（其周期就是TDM帧的长度）的。<br>TDM 信号也称为<strong>等时</strong> (isochronous) 信号。<br><strong>时分复用的所有用户在不同的时间占用同样的频带宽度。</strong></p>
<p><img src="https://i.loli.net/2020/06/07/N8tTO5GzHMLvqyu.png" alt="时分复用示意图"></p>
<p>进行多路复用有两种标准，一种欧洲标准（即我国标准）E1，另一种是北美标准T1</p>
<p>E1：每一个TDM帧分为32个等长的时隙，CH0——CH31，其中CH0用于帧同步，CH16用于传输信令，所以话路就是CH1——CH15和CH17——CH31，一共30个话路，因为使用8bit编码，所以每个时隙传输8bit，所以8<em>32=256bit，又因为每一个TDM帧的周期是125us，所以每秒可以传输8000个TDM帧（求倒数），每帧有32个时隙，每个时隙都采用8bit编码，那么1秒内共传出8\</em>32*8000=2048*10^3=2.048*10^6=2.048Mbps(个二进制位)（第一代宽带ADSL为什么是2M的原因）</p>
<p>1M的宽带是T1标准，T1和E1用的都是电话线路，所以T1每秒也传输8000个TDM帧，但T1只有24个话路，每个话路也是8bit编码，另外增加了一个帧同步码（只有1bit），所以T1每帧8*24+1=193bit，由于每秒传输8000个TDM帧，所以1秒内共传出193*8000=1.544Mbps</p>
<p>时分复用可能会造成线路资源的浪费<br>使用时分复用系统传送计算机数据时，由于计算机数据的突发性质，用户对分配到的子信道的利用率一般是不高的。</p>
<p><img src="https://i.loli.net/2020/06/07/wSbJBf9lZcAtmUM.png" alt="时分复用造成资源浪费"></p>
<h3 id="统计时分复用STDM"><a href="#统计时分复用STDM" class="headerlink" title="统计时分复用STDM"></a>统计时分复用STDM</h3><p>Statistic TDM，统计时分复用是一种移步时分复用，而普通的时分复用是同步时分复用<br><img src="https://i.loli.net/2020/06/07/MdvJtlY41DorL9H.png" alt="统计时分复用工作原理"></p>
<p>已知电话线路的最高频率是3.4KHz，采样定理要求采样频率必须是最高频率的2倍以上，也就是必须&gt;=2<em>3.4=6.8KHz，所以采用的是8KHz作为采样频率，所以采样周期就是1/8000s=125us，电话线路采用8bit编码，1路模拟信号将转换成8000/s个脉冲信号，所以信号的传输速率=8000\</em>8=64kbps</p>
<h3 id="波分复用"><a href="#波分复用" class="headerlink" title="波分复用"></a>波分复用</h3><p>Wavelength Division Multiplexing，波分复用主要针对的是广播信号，按照波长进行复用，也称为光的频分复用，在一根光纤上传输的多路复用信号的波长是接近的<br><img src="https://i.loli.net/2020/06/07/7xSEj5PzGhHiJm4.png" alt="波分复用"></p>
<h3 id="码分复用CDM（必考）"><a href="#码分复用CDM（必考）" class="headerlink" title="码分复用CDM（必考）"></a>码分复用CDM（必考）</h3><p>Code Division Multiplexing<br>常用的名词是<strong>码分多址 **CDMA (Code Division Multiple Access)。<br>各用户使用经过特殊挑选的不同码型，因此彼此不会造成干扰。<br>这种系统发送的信号有很强的抗干扰能力，其频谱类似于</strong>白噪声<strong>，不易被敌人发现。<br>**白噪声</strong>：信号在各频率上的功率几乎一样的，功率密度在整个频域是个常数，所有频率具有相同的能量密度</p>
<h4 id="码片序列"><a href="#码片序列" class="headerlink" title="码片序列"></a>码片序列</h4><p>每一个比特时间划分为 m 个短的间隔，称为码片 (chip)。<br>每个站被指派一个唯一的 m bit 码片序列。<br>        <strong>1.如发送比特 1，则发送自己的 m bit 码片序列。</strong><br>        <strong>2.如发送比特 0，则发送该码片序列的二进制反码。 **<br>例如，S 站的 8 bit 码片序列是 00011011。<br>        **1.发送比特 1 时，就发送序列 00011011，</strong><br>        <strong>2.发送比特 0 时，就发送序列 11100100。</strong><br>S 站的码片序列：(–1 –1 –1 +1 +1 –1 +1 +1) </p>
<p><strong>考试时如果给定的是码片序列，需要转换成向量的形式，1对应+1，0对应-1</strong></p>
<p><em>例如：00011011=（-1，-1，-1，+1，+1，-1，+1，+1）</em></p>
<p><strong>要求：每个站点的码片序列不同，而且需要相互正交（向量正交）。</strong></p>
<p>任何一个码片向量和该码片自己做向量正交运算</p>
<p>接受到的永远是各个站点发送的信号总和</p>
<p>接收方如果想知道某个站点具体发送什么数据，就必须先要得到该站点的码片序列，然后用该站点的码片序列与信号和做内积</p>
<h4 id="码片序列实现扩频"><a href="#码片序列实现扩频" class="headerlink" title="码片序列实现扩频"></a>码片序列实现扩频</h4><p>假定S站要发送信息的数据率为 b bit/s。由于每一个比特要转换成 m 个比特的码片，因此 S 站实际上发送的数据率提高到 mb bit/s，同时 S 站所占用的频带宽度也提高到原来数值的 m 倍。<br>这种通信方式是<strong>扩频</strong>(spread spectrum)通信中的一种。<br>扩频通信通常有两大类：<br>        1.一种是<strong>直接序列扩频DSSS</strong> (Direct Sequence Spread Spectrum)，如上面讲的使用码片序列就是这一类。<br>        2.另一种是<strong>跳频扩频FHSS</strong> (Frequency Hopping Spread Spectrum)。</p>
<h4 id="CDMA-的重要特点"><a href="#CDMA-的重要特点" class="headerlink" title="CDMA 的重要特点"></a>CDMA 的重要特点</h4><p>每个站分配的码片序列不仅<strong>必须各不相同</strong>，并且还<strong>必须互相正交</strong> (orthogonal)。<br>在实用的系统中是使用<strong>伪随机码序列</strong>。 </p>
<h4 id="码片序列的正交关系"><a href="#码片序列的正交关系" class="headerlink" title="码片序列的正交关系"></a>码片序列的正交关系</h4><p>令向量 S 表示站 S 的码片向量，令 T 表示其他任何站的码片向量。<br>两个不同站的码片序列正交，就是向量 S 和T 的<strong>规格化内积</strong> (inner product) 等于 0： </p>
<p><img src="https://i.loli.net/2020/06/07/5pqav7NSJRnei68.png" alt="码片序列的正交公式"></p>
<p>正交关系的另一个重要特性 ：</p>
<p>任何一个码片向量和该码片向量自己的规格化内积都是 1 。</p>
<p><img src="https://i.loli.net/2020/06/07/G1mcETXKyedH4Yf.png" alt="规格化内积公式"></p>
<p>一个码片向量和该码片反码的向量的规格化内积值是 –1。 </p>
<p><img src="https://i.loli.net/2020/06/07/2QGngDXzftE1TlS.png" alt="CDMA工作原理"></p>
<h2 id="数字传输系统（不重要）"><a href="#数字传输系统（不重要）" class="headerlink" title="数字传输系统（不重要）"></a>数字传输系统（不重要）</h2><p>在早期电话网中，从市话局到用户电话机的用户线是采用最廉价的双绞线电缆，而长途干线采用的是频分复用 FDM 的模拟传输方式。<br><strong>与模拟通信相比，数字通信无论是在传输质量上还是经济上都有明显的优势。</strong><br>目前，长途干线大都采用时分复用 PCM 的数字传输方式。<br>*<em>脉码调制 PCM *</em>体制最初是为了在电话局之间的中继线上传送多路的电话。</p>
<p>由于历史上的原因，PCM 有两个互不兼容的国际标准：<br>        1.北美的 24 路 PCM（简称为 T1）<br>        2.欧洲的 30 路 PCM（简称为 E1）<br>我国采用的是欧洲的 E1 标准。<br>E1 的速率是 2.048 Mbit/s，而 T1 的速率是 1.544 Mbit/s。<br>当需要有更高的数据率时，可采用复用的方法。 </p>
<h4 id="旧数字传输系统的缺点"><a href="#旧数字传输系统的缺点" class="headerlink" title="旧数字传输系统的缺点"></a>旧数字传输系统的缺点</h4><p>最主要的是以下两个方面：<br><strong>速率标准不统一</strong><br>        1.如果不对高次群的数字传输速率进行标准化，国际范围的<strong>基于光纤高速数据传输就很难实现</strong>。<br><strong>不是同步传输</strong><br>        1.在过去相当长的时间，为了节约经费，各国的数字网主要采用准同步方式。<br>        2.当数据传输的速率很高时，收发双方的时钟同步就成为很大的问题。 </p>
<h4 id="同步光纤网-SONET"><a href="#同步光纤网-SONET" class="headerlink" title="同步光纤网 SONET"></a>同步光纤网 SONET</h4><p><strong>同步光纤网 **SONET (Synchronous Optical Network)  的各级时钟都来自一个非常精确的主时钟。<br>SONET 为光纤传输系统定义了同步传输的线路速率等级结构<br>        1.对电信信号称为第 1 级</strong>同步传送信号** STS-1 (Synchronous Transport Signal)，其传输速率是 51.84 Mbit/s。<br>        2.对光信号则称为第 1 级<strong>光载波</strong> OC-1 (OC 表示Optical Carrier)。<br>现已定义了从 51.84 Mbit/s (即OC-1) 一直到 9953.280 Mbit/s (即 OC-192/STS-192) 的标准。 </p>
<h4 id="同步数字系列-SDH"><a href="#同步数字系列-SDH" class="headerlink" title="同步数字系列 SDH"></a>同步数字系列 SDH</h4><p>ITU-T 以美国标准 SONET 为基础，制订出国际标准<strong>同步数字系列</strong> SDH (Synchronous Digital Hierarchy)。<br>一般可认为 SDH 与 SONET 是同义词。<br><strong>其主要不同点是</strong>:SDH的基本速率为155.52 Mbit/s,称为第 1 级<strong>同步传递模块</strong> (Synchronous Transfer Module),即 STM-1，相当于 SONET 体系中的 OC-3 速率。 </p>
<p><img src="https://i.loli.net/2020/06/07/9wPOKBYfE3iyVsL.png" alt="同步数字系列"></p>
<h4 id="SONET-SDH-标准的意义"><a href="#SONET-SDH-标准的意义" class="headerlink" title="SONET / SDH 标准的意义"></a>SONET / SDH 标准的意义</h4><p>使不同的数字传输体制在 STM-1 等级上获得了统一。<br>第一次真正实现了数字传输体制上的世界性标准。<br>已成为公认的新一代理想的传输网体制。<br>SDH 标准也适合于微波和卫星传输的技术体制。</p>
<h2 id="宽带接入技术"><a href="#宽带接入技术" class="headerlink" title="宽带接入技术"></a>宽带接入技术</h2><p>用户要连接到互联网，必须先连接到某个ISP。<br>在互联网的发展初期，用户都是利用电话的用户线通过调制解调器连接到ISP的，电话用户线接入到互联网的速率最高仅达到56 kbit/s。<br>美国联邦通信委员会FCC原来认为只要双向速率之和超过200 kbit/s 就是宽带。但 2015 年重新定义为：<br>                                                                宽带下行速率要达到 25 Mbit/s<br>                                                                宽带上行速率要达到 3 Mbit/s</p>
<p>从宽带接入的媒体来看，可以划分为两大类：<br>        1.有线宽带接入<br>        2.无线宽带接入</p>
<h3 id="ADSL技术（记一下概念）"><a href="#ADSL技术（记一下概念）" class="headerlink" title="ADSL技术（记一下概念）"></a>ADSL技术（记一下概念）</h3><p><strong>非对称数字用户线 ADSL</strong> (Asymmetric Digital Subscriber Line) 技术就是用数字技术对现有的模拟电话用户线进行改造，使它能够承载宽带业务。<br>标准模拟电话信号的频带被限制在 300<del>3400 Hz 的范围内，但用户线本身实际可通过的信号频率仍然超过 1 MHz。<br>ADSL 技术就把 0</del>4 kHz 低端频谱留给传统电话使用，而<strong>把原来没有被利用的高端频谱留给用户上网使用</strong>。<br>DSL 就是<strong>数字用户线</strong> (Digital Subscriber Line) 的缩写。</p>
<h4 id="DSL-的几种类型"><a href="#DSL-的几种类型" class="headerlink" title="DSL 的几种类型"></a>DSL 的几种类型</h4><p><strong>ADSL *<em>(Asymmetric Digital Subscriber Line)：非对称数字用户线<br>*</em>HDSL</strong> (High speed DSL)：高速数字用户线<br><strong>SDSL *<em>(Single-line DSL)：1 对线的数字用户线<br>*</em>VDSL *<em>(Very high speed DSL)：甚高速数字用户线<br>*</em>DSL *<em>(Digital Subscriber Line) ：数字用户线<br>*</em>RADSL</strong> (Rate-Adaptive DSL)：速率自适应 DSL，是 ADSL 的一个子集，可自动调节线路速率）</p>
<h4 id="ADSL-的传输距离"><a href="#ADSL-的传输距离" class="headerlink" title="ADSL 的传输距离"></a>ADSL 的传输距离</h4><p><strong>ADSL 的传输距离</strong>取决于数据率和用户线的线径（用户线越细，信号传输时的衰减就越大）。<br>ADSL 所能得到的最高数据传输速率与实际的用户线上的信噪比密切相关。<br>例如：<br>        1.0.5 毫米线径的用户线，传输速率为 1.5~2.0 Mbit/s 时可传送5.5公里，但当传输速率提高到 6.1 Mbit/s 时，传输距离就缩短为 3.7 公里。<br>        2.如果把用户线的线径减小到 0.4 毫米，那么在 6.1 Mbit/s 的传输速率下就只能传送 2.7 公里。</p>
<h4 id="ADSL-的特点"><a href="#ADSL-的特点" class="headerlink" title="ADSL 的特点"></a>ADSL 的特点</h4><p>上行和下行带宽做成不对称的。<br>上行指从用户到 ISP，而下行指从 ISP 到用户。<br>ADSL 在用户线（铜线）的两端各安装一个 <strong>ADSL 调制解调器</strong>。<br>我国目前采用的方案是<strong>离散多音调 DMT **(Discrete Multi-Tone)调制技术。<br>这里的“多音调”就是“</strong>多载波<strong>”或“</strong>多子信道**”的意思。</p>
<h4 id="ADSL-的数据率"><a href="#ADSL-的数据率" class="headerlink" title="ADSL 的数据率"></a>ADSL 的数据率</h4><p>由于用户线的具体条件往往相差很大（距离、线径、受到相邻用户线的干扰程度等都不同），<strong>因此 ADSL 采用自适应调制技术使用户线能够传送尽可能高的数据率</strong>。<br>当 ADSL 启动时，用户线两端的 ADSL 调制解调器就测试可用的频率、各子信道受到的干扰情况，以及在每一个频率上测试信号的传输质量。<br><strong>ADSL 不能保证固定的数据率</strong>。对于质量很差的用户线甚至无法开通 ADSL。<br>通常下行数据率在32 kbit/s到6.4 Mbit/s之间，而上行数据率在 32 kbit/s 到 640 kbit/s 之间。</p>
<h4 id="ADSL-的组成"><a href="#ADSL-的组成" class="headerlink" title="ADSL 的组成"></a>ADSL 的组成</h4><p><img src="https://i.loli.net/2020/06/07/TfYKIh7iZpzdAUH.png" alt="ADSL组成"></p>
<h4 id="第二代ADSL"><a href="#第二代ADSL" class="headerlink" title="第二代ADSL"></a>第二代ADSL</h4><p>包括 ADSL2（G.992.3 和 G.992.4）和 ADSL2+（G.992.5）。<br>通过提高调制效率得到了<strong>更高的数据率</strong>。<br>        1.ADSL2 要求至少应支持下行 8 Mbit/s、上行 800 kbit/s的速率。<br>        2.ADSL2+ 则将频谱范围从 1.1 MHz 扩展至 2.2 MHz，下行速率可达 16 Mbit/s（最大传输速率可达 25 Mbit/s），而上行速率可达 800 kbit/s。<br>采用了<strong>无缝速率自适应技术</strong> SRA (Seamless Rate Adaptation)，可在运营中不中断通信和不产生误码的情况下，自适应地调整数据率。<br>改善了线路质量评测和故障定位功能，这对提高网络的运行维护水平具有非常重要的意义。</p>
<h4 id="DMT-技术"><a href="#DMT-技术" class="headerlink" title="DMT 技术"></a>DMT 技术</h4><p>DMT 调制技术采用频分复用的方法，把 40 kHz 以上一直到 1.1 MHz 的高端频谱划分为许多子信道，其中 25 个子信道用于上行信道，而 249 个子信道用于下行信道。<br>每个子信道占据 4 kHz 带宽（严格讲是 4.3125 kHz），并使用不同的载波（即不同的音调）进行数字调制。这种做法相当于在一对用户线上使用许多小的调制解调器并行地传送数据。</p>
<p>DMT 技术的频谱分布<br><img src="https://i.loli.net/2020/06/07/1keyJO8iRDuQZfT.png" alt="DMT 技术的频谱分布 "></p>
<h4 id=""><a href="#" class="headerlink" title=""></a></h4><h3 id="光纤同轴混合网（HFC网）"><a href="#光纤同轴混合网（HFC网）" class="headerlink" title="光纤同轴混合网（HFC网）"></a>光纤同轴混合网（HFC网）</h3><p>HFC (Hybrid Fiber Coax) 网是在目前覆盖面很广的有线电视网 CATV 的基础上开发的一种居民宽带接入网。<br>HFC 网除可传送 CATV 外，还提供电话、数据和其他宽带交互型业务。<br>现有的 CATV 网是树形拓扑结构的同轴电缆网络，它采用模拟技术的频分复用对电视节目进行单向传输。<br><strong>HFC 网对 CATV 网进行了改造</strong>。 </p>
<p>HFC 网的主干线路采用光纤<br>HFC 网将原 CATV 网中的同轴电缆<strong>主干部分改换为光纤</strong>，并使用<strong>模拟光纤技术</strong>。<br>在模拟光纤中采用<strong>光的振幅调制AM</strong>，这比使用数字光纤更为经济。<br>模拟光纤从<strong>头端</strong>连接到<strong>光纤结点</strong> (fiber node)，即<strong>光分配结点</strong> ODN (Optical Distribution Node)。在光纤结点光信号被转换为电信号。在光纤结点以下就是同轴电缆。 </p>
<p>HFC 网采用结点体系结构<br><img src="https://i.loli.net/2020/06/07/CVc8gYaipoUIJkA.png" alt="HFC 网结构图"></p>
<p>HFC 网具有双向传输功能，扩展了传输频带<br><img src="https://i.loli.net/2020/06/07/M3pFVqAUJ5hisf9.png" alt="我国HFC网频谱划分"></p>
<p>每个家庭要安装一个用户接口盒<br><strong>用户接口盒 UIB **(User Interface Box) 要提供</strong>三种连接**，即：<br>        1.使用同轴电缆连接到机顶盒 (set-top box)，然后再连接到用户的电视机。<br>        2.使用双绞线连接到用户的电话机。<br>        3.使用电缆调制解调器连接到用户的计算机。</p>
<h4 id="电缆调制解调器-Cable-Modem"><a href="#电缆调制解调器-Cable-Modem" class="headerlink" title="电缆调制解调器 (Cable Modem)"></a>电缆调制解调器 (Cable Modem)</h4><p><strong>电缆调制解调器</strong>是为 HFC 网而使用的调制解调器。<br>电缆调制解调器最大的特点就是传输速率高。<br>        1.下行速率一般在 3 ~ 10 Mbit/s之间，最高可达 30 Mbit/s。<br>        2.上行速率一般为 0.2 ~ 2 Mbit/s，最高可达 10 Mbit/s。<br>电缆调制解调器比在普通电话线上使用的调制解调器要复杂得多，并且不是成对使用，而是只安装在用户端。 </p>
<h3 id="FTTx-技术"><a href="#FTTx-技术" class="headerlink" title="FTTx 技术"></a>FTTx 技术</h3><p>FTTx 是一种实现宽带居民接入网的方案，代表多种宽带光纤接入方式。<br>FTTx 表示 Fiber To The…（光纤到…），例如：<br>        1.<strong>光纤到户 FTTH</strong> (Fiber To The Home)：光纤一直铺设到用户家庭，可能是居民接入网最后的解决方法。<br>        2.<strong>光纤到大楼 FTTB</strong> (Fiber To The Building)：光纤进入大楼后就转换为电信号，然后用电缆或双绞线分配到各用户。<br>        3.<strong>光纤到路边 FTTC</strong> (Fiber To The Curb)：光纤铺到路边，从路边到各用户可使用星形结构双绞线作为传输媒体。</p>
<p>无源光网络 PON (Passive Optical Network) 的组成<br><img src="https://i.loli.net/2020/06/07/LYNHrbXf8Eduikj.png" alt="无源光网络 PON 的组成 "></p>
<h1 id="数据链路层"><a href="#数据链路层" class="headerlink" title="数据链路层"></a>数据链路层</h1><p>在进入数据链路层之前，先复习一下计算机网络结构体系，对层次再一次梳理<br>网络中的主机、路由器等都必须实现数据链路层。<br>局域网中的主机、交换机等都必须实现数据链路层</p>
<p>数据链路层上是数据帧</p>
<p>网络层上是数据包</p>
<p>运输层上是报文</p>
<p><img src="https://i.loli.net/2020/06/07/mguObJQysa7rXK8.png" alt="计算机网络体系结构"></p>
<p><img src="https://i.loli.net/2020/06/07/tUA67cNLF82ErWf.png" alt="数据链路层"></p>
<p><img src="https://i.loli.net/2020/06/07/BVKWCtluhS8Zqy3.png" alt="数据链路层"></p>
<p><img src="https://i.loli.net/2020/06/07/OKsv2qxDXZWBA4U.png" alt="数据链路层作用"></p>
<p><img src="https://i.loli.net/2020/06/07/3kYbqocsnDxeVzO.png" alt="数据链路层作用"></p>
<p><img src="https://i.loli.net/2020/06/07/1cwYrVTbN6sfdKp.png" alt="数据链路层使用的信道"></p>
<h2 id="使用点对点通信的数据链路层"><a href="#使用点对点通信的数据链路层" class="headerlink" title="使用点对点通信的数据链路层"></a>使用点对点通信的数据链路层</h2><h3 id="数据链路与帧（概念）"><a href="#数据链路与帧（概念）" class="headerlink" title="数据链路与帧（概念）"></a>数据链路与帧（概念）</h3><p><strong>链路</strong> (link) 是一条无源的点到点的物理线路段，中间没有任何其他的交换结点。<br><strong>一条链路只是一条通路的一个组成部分。</strong><br><strong>数据链路 **(data link) 除了物理线路外，还必须有通信协议来控制这些数据的传输。若把实现这些协议的硬件和软件加到链路上，就构成了数据链路。<br>        1.现在最常用的方法是使用适配器（即网卡）来实现这些协议的硬件和软件。<br>        2.一般的适配器都包括了数据链路层和物理层这两层的功能。<br>也有人采用另外的术语。这就是把链路分为</strong>物理链路<strong>和</strong>逻辑链路<strong>。<br>**物理链路</strong>就是上面所说的链路。<br><strong>逻辑链路</strong>就是上面的数据链路，是物理链路加上必要的通信协议。<br>早期的数据通信协议曾叫做<strong>通信规程</strong> (procedure)。因此在数据链路层，规程和协议是同义语。</p>
<p>数据链路层传输的是帧<br><img src="https://i.loli.net/2020/06/07/buosMpfANOhj1Ei.png" alt="数据链路层传送的是帧"></p>
<p>常常在两个对等的数据链路层之间画出一个数字管道，而在这条数字管道上传输的数据单位是帧。<br><img src="https://i.loli.net/2020/06/07/nrHmbLhNMcCtj9F.png" alt="数据链路层传输的是帧"><br>数据链路层不必考虑物理层如何实现比特传输的细节。甚至还可以更简单地设想好像是沿着两个数据链路层之间的水平方向把帧直接发送到对方。</p>
<h3 id="三个基本问题（没怎么考）"><a href="#三个基本问题（没怎么考）" class="headerlink" title="三个基本问题（没怎么考）"></a>三个基本问题（没怎么考）</h3><h4 id="封装成帧"><a href="#封装成帧" class="headerlink" title="封装成帧"></a>封装成帧</h4><p>封装成帧 (framing) 就是在一段数据的前后分别添加首部和尾部，然后就构成了一个帧。<br>首部和尾部的一个重要作用就是进行帧定界。<br><img src="https://i.loli.net/2020/06/07/PtKQ9DEqnvFL2OJ.png" alt="封装成帧"></p>
<p>用控制字符进行帧定界的方法</p>
<p>当数据是由可打印的ASCII码组成的文本文件时，帧定界可以使用特殊的<strong>帧定界符</strong><br>控制字符SOH (Start Of Header) 放在一帧的最前面，表示帧的首部开始。<br>另一个控制字符 EOT (End Of Transmission) 表示帧的结束。<br><img src="https://i.loli.net/2020/06/07/3txMja5DbpNzWO7.png" alt="用控制字符进行帧定界的方法"></p>
<h4 id="透明传输"><a href="#透明传输" class="headerlink" title="透明传输"></a>透明传输</h4><p>如果数据中的某个字节的二进制代码恰好和 SOH 或 EOT 一样，数据链路层就会错误地“找到帧的边界”。<br><img src="https://i.loli.net/2020/06/07/BDjZitT9PwVI6f1.png" alt="用字节填充解决透明传输"></p>
<p>解决透明传输问题</p>
<p><strong>解决方法</strong>：字节填充 (byte stuffing) 或字符填充 (character stuffing)。<br>发送端的数据链路层在数据中出现控制字符“SOH”或“EOT”的前面<strong>插入一个转义字符“ESC”</strong>(其十六进制编码是1B)。<br>接收端的数据链路层在将数据送往网络层之前删除插入的转义字符。<br>如果转义字符也出现在数据当中，那么应在转义字符前面插入一个转义字符 ESC。当接收端收到连续的两个转义字符时，就删除其中前面的一个。<br><img src="https://i.loli.net/2020/06/07/BDjZitT9PwVI6f1.png" alt="用字节填充解决透明传输"></p>
<p>透明：指某一个实际存在的事物看起来却好像不存在一样。</p>
<p><em>“在数据链路层透明传送数据”</em>表示无论发送什么样的比特组合的数据，这些数据都能够按照原样没有差错地通过这个数据链路层。</p>
<h4 id="差错控制-1"><a href="#差错控制-1" class="headerlink" title="差错控制"></a>差错控制</h4><p>在传输过程中可能会产生比特差错：1 可能会变成 0， 而 0 也可能变成 1。<br><img src="https://i.loli.net/2020/06/07/8cmCZdEQVphB1eS.png" alt="比特错的产生"></p>
<p>在一段时间内，传输错误的比特占所传输比特总数的比率称为<strong>误码率</strong> BER (Bit Error Rate)。<br>误码率与信噪比有很大的关系。<br>为了保证数据传输的可靠性，在计算机网络传输数据时，必须采用各种差错检测措施。<br>在数据链路层传送的帧中，<strong>广泛</strong>使用了*<em>循环冗余检验 CRC *</em>的检错技术。</p>
<h5 id="循环冗余校验原理（必考计算题）"><a href="#循环冗余校验原理（必考计算题）" class="headerlink" title="循环冗余校验原理（必考计算题）"></a>循环冗余校验原理（必考计算题）</h5><p>在发送端，先把数据划分为组。假定每组 k 个比特。<br>在每组 M 后面再添加供差错检测用的 n 位<strong>冗余码</strong>，然后一起发送出去。<br><img src="https://i.loli.net/2020/06/07/Y4xSqn85LIeO2Ni.png" alt="循环冗余校验"></p>
<p><img src="https://i.loli.net/2020/06/07/ZSBT7cNtVWOH5LI.png" alt="循环冗余校验原理说明"></p>
<h5 id="冗余码计算（必考计算题）"><a href="#冗余码计算（必考计算题）" class="headerlink" title="冗余码计算（必考计算题）"></a>冗余码计算（必考计算题）</h5><p>用二进制的模 2 运算进行 2n 乘 M 的运算，这相当于在 M 后面添加 n 个 0。<br>得到的 (k + n) 位的数<strong>除以</strong>事先选定好的长度为 (n + 1) 位的<strong>除数</strong> P，得出<strong>商</strong>是 Q 而<strong>余数</strong>是 R，余数 R 比除数 P 少 1 位，即 R 是 n 位。<br>将余数 R 作为<strong>冗余码</strong>拼接在数据 M 后面，一起发送出去。<br><img src="https://i.loli.net/2020/06/07/GdOXcw5K8neCQr7.png" alt="冗余码计算"></p>
<p>接收端对收到的每一帧进行 CRC 检验</p>
<p>​        1.若得出的余数 R = 0，则判定这个帧没有差错，就接受 (accept)。<br>​        2.若余数 R ≠ 0，则判定这个帧有差错，就丢弃。<br>但这种检测方法并不能确定究竟是哪一个或哪几个比特出现了差错。<br>只要经过严格的挑选，并使用位数足够多的除数 P，那么出现检测不到的差错的概率就很小很小。 </p>
<p>冗余码的计算举例 </p>
<p>现在 k = 6, M = 101001。<br>设 n = 3, 除数 P = 1101，<br>被除数是:<br>$$<br>2^nM = 101001000<br>$$<br>模 2 运算的结果是：商 Q = 110101，余数 R = 001。<br>把余数 R 作为冗余码添加在数据 M 的后面发送出去。</p>
<p>发送的数据是：<br>$$<br>2^nM + R<br>$$<br>即：101001001，共 (k + n) 位。 </p>
<h5 id="帧检验序列-FCS（必考计算题）"><a href="#帧检验序列-FCS（必考计算题）" class="headerlink" title="帧检验序列 FCS（必考计算题）"></a>帧检验序列 FCS（必考计算题）</h5><p>在数据后面添加上的冗余码称为帧检验序列 FCS (Frame Check Sequence)。<br>循环冗余检验 CRC 和帧检验序列 FCS <strong>并不等同</strong>。<br>        1.CRC 是一种常用的检错方法，而 FCS 是添加在数据后面的冗余码。<br>        2.FCS 可以用 CRC 这种方法得出，但 CRC 并非用来获得 FCS 的唯一方法。 </p>
<h5 id="关于CRC校验需要注意（必考计算题）"><a href="#关于CRC校验需要注意（必考计算题）" class="headerlink" title="关于CRC校验需要注意（必考计算题）"></a>关于CRC校验需要注意（必考计算题）</h5><p>仅用循环冗余检验 CRC 差错检测技术只能做到<strong>无差错接受 **(accept)。<br>“</strong>无差错接受<strong>”是指：“凡是接受的帧（即不包括丢弃的帧），我们都能以非常接近于 1 的概率认为这些帧在传输过程中没有产生差错”。<br>也就是说：“凡是接收端数据链路层接受的帧都没有传输差错”（有差错的帧就丢弃而不接受）。<br>**单纯使用 CRC 差错检测技术不能实现“无差错传输”或“可靠传输”。</strong><br>应当明确，“<strong>无比特差错</strong>”与“<strong>无传输差错</strong>”是<strong>不同的</strong>概念。<br>在数据链路层使用 CRC 检验，能够实现<strong>无比特差错</strong>的传输，但这还<strong>不是可靠传输</strong>。<br>要做到“无差错传输”（即发送什么就收到什么）就必须再加上确认和重传机制。<br>本章介绍的数据链路层协议都不是可靠传输的协议。</p>
<h2 id="点对点协议PPP"><a href="#点对点协议PPP" class="headerlink" title="点对点协议PPP"></a>点对点协议PPP</h2><h3 id="PPP协议的特点（考的少）"><a href="#PPP协议的特点（考的少）" class="headerlink" title="PPP协议的特点（考的少）"></a>PPP协议的特点（考的少）</h3><p>对于点对点的链路，目前使用得最广泛的数据链路层协议是<strong>点对点协议</strong> PPP (Point-to-Point Protocol)。<br>PPP 协议在 1994 年就已成为互联网的正式标准。</p>
<p><img src="https://i.loli.net/2020/06/07/lwejYpx3hzQ5oaU.png" alt="PPP协议的使用"></p>
<h4 id="PPP-协议应满足的需求"><a href="#PPP-协议应满足的需求" class="headerlink" title="PPP 协议应满足的需求"></a>PPP 协议应满足的需求</h4><p>简单 —— <strong>这是首要的要求</strong>。<br>封装成帧 —— 必须规定特殊的字符作为帧定界符。<br>透明性 —— 必须保证数据传输的透明性。<br>多种网络层协议 —— 能够在同一条物理链路上同时支持多种网络层协议。<br>多种类型链路 —— 能够在多种类型的链路上运行。<br>差错检测 —— 能够对接收端收到的帧进行检测，并立即丢弃有差错的帧。<br>检测连接状态 —— 能够及时自动检测出链路是否处于正常工作状态。<br>最大传送单元 —— 必须对每一种类型的点对点链路设置最大传送单元 MTU 的标准默认值,促进各种实现之间的互操作性。<br>网络层地址协商 —— 必须提供一种机制使通信的两个网络层实体能够通过协商知道或能够配置彼此的网络层地址。<br>数据压缩协商 —— 必须提供一种方法来协商使用数据压缩算法。</p>
<h4 id="PPP-协议不需要的功能"><a href="#PPP-协议不需要的功能" class="headerlink" title="PPP 协议不需要的功能"></a>PPP 协议不需要的功能</h4><p>纠错 、流量控制 、序号 、多点线路 、半双工或单工链路 </p>
<h4 id="PPP-协议的组成"><a href="#PPP-协议的组成" class="headerlink" title="PPP 协议的组成"></a>PPP 协议的组成</h4><p>PPP 协议有三个组成部分：<br>        1.一个将 IP 数据报封装到串行链路的方法。<br>        2.链路控制协议 LCP (Link Control Protocol)。<br>        3.网络控制协议 NCP (Network Control Protocol)。 </p>
<h3 id="PPP协议的帧格式（不会考）"><a href="#PPP协议的帧格式（不会考）" class="headerlink" title="PPP协议的帧格式（不会考）"></a>PPP协议的帧格式（不会考）</h3><p>PPP 帧的首部和尾部分别为 4 个字段和 2 个字段。<br>标志字段 F = 0x7E （符号“0x”表示后面的字符是用十六进制表示。十六进制的 7E 的二进制表示是 01111110）。<br>地址字段 A 只置为 0xFF。地址字段实际上并不起作用。<br>控制字段 C 通常置为 0x03。<br><strong>PPP 是面向字节的，所有的 PPP 帧的长度都是整数字节。</strong></p>
<p><img src="https://i.loli.net/2020/06/07/gPWXMezAutfjDVr.png" alt="PPP协议的帧格式"></p>
<h3 id="透明传输问题"><a href="#透明传输问题" class="headerlink" title="透明传输问题"></a>透明传输问题</h3><p>当 PPP 用在异步传输时，就使用一种特殊的<strong>字符填充法</strong>。<br>当 PPP 用在同步传输链路时，协议规定采用硬件来完成<strong>比特填充</strong>（和 HDLC 的做法一样）。  </p>
<h3 id="字符填充"><a href="#字符填充" class="headerlink" title="字符填充"></a>字符填充</h3><p>将信息字段中出现的每一个 0x7E 字节转变成为 2 字节序列 (0x7D, 0x5E)。<br>若信息字段中出现一个 0x7D 的字节, 则将其转变成为 2 字节序列 (0x7D, 0x5D)。<br>若信息字段中出现 ASCII 码的控制字符（即数值小于 0x20 的字符），则在该字符前面要加入一个 0x7D 字节，同时将该字符的编码加以改变。 </p>
<p>字符填充法<br><img src="https://i.loli.net/2020/06/08/KBNX3nrIDzF7pqx.png" alt="字符填充法"></p>
<p>零比特填充<br>PPP 协议用在 SONET/SDH 链路时，使用同步传输（一连串的比特连续传送）。<strong>这时 PPP 协议采用零比特填充方法来实现透明传输。</strong><br>在发送端，只要发现有 5 个连续 1，则立即填入一个 0。<br>接收端对帧中的比特流进行扫描。每当发现 5 个连续1时，就把这 5 个连续 1 后的一个 0 删除。</p>
<p><img src="https://i.loli.net/2020/06/08/w3WrGJ2joAgMqVR.png" alt="零比特填充"></p>
<p> 不提供使用序号和确认的可靠传输 </p>
<p>PPP 协议之所以<strong>不使用</strong>序号和确认机制是出于以下的考虑：<br>        1.在数据链路层出现差错的概率不大时，使用比较简单的 PPP 协议较为合理。<br>        2.在因特网环境下，PPP 的信息字段放入的数据是 IP  数据报。数据链路层的可靠传输并不能够保证网络层的传输也是可靠的。<br>        3.帧检验序列 FCS 字段可保证无差错接受。</p>
<h3 id="PPP协议的工作状态"><a href="#PPP协议的工作状态" class="headerlink" title="PPP协议的工作状态"></a>PPP协议的工作状态</h3><p>当用户拨号接入 ISP 时，路由器的调制解调器对拨号做出确认，并建立一条物理连接。<br>PC 机向路由器发送一系列的 LCP 分组（封装成多个 PPP 帧）。<br>这些分组及其响应选择一些 PPP 参数，并进行网络层配置，NCP 给新接入的 PC 机分配一个临时的 IP 地址，使 PC 机成为因特网上的一个主机。<br>通信完毕时，NCP 释放网络层连接，收回原来分配出去的 IP 地址。接着，LCP 释放数据链路层连接。最后释放的是物理层的连接。<br><strong>可见，PPP 协议已不是纯粹的数据链路层的协议，它还包含了物理层和网络层的内容。</strong></p>
<p><img src="https://i.loli.net/2020/06/08/NI8laH6QOfDs3BT.png" alt="PPP协议的状态图"></p>
<h2 id="使用广播信道的数据链路层"><a href="#使用广播信道的数据链路层" class="headerlink" title="使用广播信道的数据链路层"></a>使用广播信道的数据链路层</h2><h3 id="局域网的数据链路层"><a href="#局域网的数据链路层" class="headerlink" title="局域网的数据链路层"></a>局域网的数据链路层</h3><p>局域网最主要的<strong>特点</strong>是：<br>        1.网络为一个单位所拥有；<br>        2.地理范围和站点数目均有限。<br>局域网具有如下<strong>主要优点</strong>：<br>        1.具有广播功能，从一个站点可很方便地访问全网。局域网上的主机可共享连接在局域网上的各种硬件和软件资源。<br>        2.便于系统的扩展和逐渐地演变，各设备的位置可灵活调整和改变。<br>        3.提高了系统的可靠性、可用性和残存性。</p>
<p>局域网拓扑结构<br><img src="https://i.loli.net/2020/06/08/TdP1snHgyZkAcij.png" alt="局域网拓扑结构"></p>
<p>局域网传输媒体<br><img src="https://i.loli.net/2020/06/08/e8dkIoCyuMzmWVc.png" alt="局域网传输媒体"></p>
<p>共享信道带来的问题<br><img src="https://i.loli.net/2020/06/08/UMH8GEDjbgcw19v.png" alt="共享信道带来的问题"></p>
<p>媒体共享技术<br><strong>静态划分信道</strong><br>        1.频分复用<br>        2.时分复用<br>        3.波分复用<br>        4.码分复用<br><strong>动态媒体接入控制（多点接入）</strong><br>        1.随机接入<br>        2.受控接入 ，如多点线路探询 (polling)，或轮询。      </p>
<p>以太网的两个标准<br><strong>DIX Ethernet V2</strong> 是世界上第一个局域网产品（以太网）的规约。<br><strong>IEEE 802.3</strong> 是第一个 IEEE 的以太网标准。<br>DIX Ethernet V2 标准与 IEEE 的 802.3 标准只有很小的差别，因此可以将 802.3 局域网简称为“以太网”。<br>严格说来，“以太网”应当是指符合 DIX Ethernet V2 标准的局域网 。 </p>
<h4 id="数据链路层的两个子层（不理解）"><a href="#数据链路层的两个子层（不理解）" class="headerlink" title="数据链路层的两个子层（不理解）"></a>数据链路层的两个子层（不理解）</h4><p>为了使数据链路层能更好地适应多种局域网标准，IEEE 802 委员会就将局域网的数据链路层拆成<strong>两个子层</strong>：<br>            1.逻辑链路控制 LLC (Logical Link Control)子层；<br>            2.媒体接入控制 MAC (Medium Access Control)子层。<br>与接入到传输媒体有关的内容都放在 MAC子层，而 LLC 子层则与传输媒体无关。<br><strong>不管采用何种协议的局域网，对 LLC 子层来说都是透明的。</strong><br><img src="https://i.loli.net/2020/06/08/NJjRTOlkfMSwV2E.png" alt="局域网对 LLC 子层是透明的"><br>一般不考虑 LLC 子层<br>由于 TCP/IP 体系经常使用的局域网是 DIX Ethernet V2 而不是 802.3 标准中的几种局域网，因此现在 802 委员会制定的逻辑链路控制子层 LLC（即 802.2 标准）的作用已经不大了。<br>很多厂商生产的适配器上就仅装有 MAC 协议而没有 LLC 协议。 </p>
<p>适配器的作用<br>网络接口板又称为<strong>通信适配器</strong> (adapter) 或<strong>网络接口卡</strong> NIC (Network Interface Card)，或“<strong>网卡</strong>”。<br>适配器的重要功能：<br>        1.进行串行/并行转换。<br>        2.对数据进行缓存。<br>        3.在计算机的操作系统安装设备驱动程序。<br>        4.实现以太网协议。<br><img src="https://i.loli.net/2020/06/08/raF5YN4U7X3pf9o.png" alt="计算机通过适配器和局域网进行通信"></p>
<h3 id="CSMA-CD-协议"><a href="#CSMA-CD-协议" class="headerlink" title="CSMA/CD 协议"></a>CSMA/CD 协议</h3><p>最初的以太网是将许多计算机都连接到一根总线上。<strong>易于实现广播通信</strong>。当初认为这样的连接方法既简单又可靠，因为总线上没有有源器件。<br><img src="https://i.loli.net/2020/06/08/HXhwvdIbLqJtEMR.png" alt="总线连接"></p>
<p>为了实现<strong>一对一</strong>通信，将接收站的硬件地址写入帧首部中的<strong>目的地址</strong>字段中。仅当数据帧中的目的地址与适配器的硬件地址一致时，才能接收这个数据帧。<br><img src="https://i.loli.net/2020/06/08/pkHaSm7l8926qbe.png" alt="一对一通信"></p>
<p>总线也有<strong>缺点</strong>。若多台计算机或多个站点同时发送时，会产生发送碰撞或冲突，导致发送失败。<br><img src="https://i.loli.net/2020/06/08/zbuC75mncySVIx8.png" alt="总线连接缺点"></p>
<h4 id="以太网的两种重要措施"><a href="#以太网的两种重要措施" class="headerlink" title="以太网的两种重要措施"></a>以太网的两种重要措施</h4><p>为了通信的简便，以太网采取了两种重要的措施：<br>(1) 采用较为灵活的<strong>无连接的工作方式</strong><br>            不必先建立连接就可以直接发送数据。<br>            对发送的数据帧不进行编号，也不要求对方发回确认。<br>            <strong>这样做的理由是局域网信道的质量很好，因信道质量产生差错的概率是很小的。</strong><br>(2) 以太网发送的数据都使用<strong>曼彻斯特</strong> (Manchester) 编码<br>            <strong>曼彻斯特编码缺点</strong>是：它所占的频带宽度比原始的基带信号增加了一倍。</p>
<h4 id="以太网提供的服务"><a href="#以太网提供的服务" class="headerlink" title="以太网提供的服务"></a>以太网提供的服务</h4><p><strong>以太网提供的服务是不可靠的交付，即尽最大努力的交付。</strong><br>当目的站收到有差错的数据帧时就丢弃此帧，其他什么也不做。<strong>差错的纠正由高层来决定</strong>。<br>如果高层发现丢失了一些数据而进行重传，但以太网并不知道这是一个重传的帧，而是当作一个新的数据帧来发送。 </p>
<p>如何避免同时发送产生的碰撞？ 采用 CSMA/CD</p>
<p><img src="https://i.loli.net/2020/06/08/9vCsDoO2p7QAMfK.png" alt="CSMA/CD协议"><br>CSMA/CD 含义：<strong>载波监听多点接入 / 碰撞检测  **(Carrier Sense Multiple Access with Collision Detection) 。<br>“</strong>多点接入<strong>”表示许多计算机以多点接入的方式连接在一根总线上。<br>“</strong>载波监听<strong>”是指每一个站在发送数据之前先要检测一下总线上是否有其他计算机在发送数据，如果有，则暂时不要发送数据，以免发生碰撞。<br>总线上并没有什么“载波”。因此， **“载波监听”就是用电子技术检测总线上有没有其他计算机发送的数据信号</strong>。</p>
<p><strong>碰撞检测</strong><br>“碰撞检测”就是计算机边发送数据边检测信道上的信号电压大小。<br>当几个站同时在总线上发送数据时，总线上的信号电压摆动值将会增大（互相叠加）。<br>当一个站检测到的信号电压摆动值超过一定的门限值时，就认为总线上至少有两个站同时在发送数据，表明产生了碰撞。<br><strong>所谓“碰撞”就是发生了冲突。因此“碰撞检测”也称为“冲突检测”。</strong></p>
<p><strong>检测到碰撞后</strong><br>在发生碰撞时，总线上传输的信号产生了严重的失真，无法从中恢复出有用的信息来。<br><strong>每一个正在发送数据的站，一旦发现总线上出现了碰撞，就要立即停止发送，免得继续浪费网络资源，然后等待一段随机时间后再次发送</strong>。</p>
<h4 id="CSMA-CD-协议工作流程"><a href="#CSMA-CD-协议工作流程" class="headerlink" title="CSMA/CD 协议工作流程"></a>CSMA/CD 协议工作流程</h4><p><img src="https://i.loli.net/2020/06/08/EcPsJaq47wY5DKA.png" alt="CSMA/CD 协议工作流程"></p>
<p>为什么要进行碰撞检测？ 因为信号传播时延对载波监听产生了影响</p>
<p><img src="https://i.loli.net/2020/06/08/8xfdn4I5TakMBvp.png" alt="为什么要进行碰撞检测？"></p>
<p>争用期<br>最先发送数据帧的站，在发送数据帧后至多经过时间 ：<br>$$<br>2\tau<br>$$<br>（两倍的端到端往返时延）就可知道发送的数据帧是否遭受了碰撞。<br>以太网的端到端往返时延：<br>$$<br>2\tau<br>$$<br>称为争用期，或碰撞窗口。<br>经过争用期这段时间还没有检测到碰撞，才能肯定这次发送不会发生碰撞。</p>
<h4 id="二进制指数类型退避算法-（看看）"><a href="#二进制指数类型退避算法-（看看）" class="headerlink" title="二进制指数类型退避算法 （看看）"></a><strong>二进制指数类型退避算法</strong> （看看）</h4><p>(truncated binary exponential type)<br>发生碰撞的站在停止发送数据后，要推迟（退避）一个<strong>随机时间</strong>才能再发送数据。<br>        1.<strong>基本退避时间取为争用期</strong>：<br>$$<br>2\tau<br>$$<br>​        2.从整数集合 [0, 1, … , (2k - 1)] 中<strong>随机</strong>地取出一个数，记为 r。重传所需的时延就是 r 倍的基本退避时间。<br>​        3.参数 k 按下面的公式计算：<br>$$<br>k = Min[重传次数, 10]<br>$$<br>​        4.当 k ≤10 时，参数 k 等于重传次数。<br>​        5.当重传达 16 次仍不能成功时即丢弃该帧，并向高层报告。 </p>
<p>例如：<br>        第 1 次冲突重传时：<br>                k = 1，r 为 {0，1} 集合中的任何一个数。<br>        第 2 次冲突重传时：<br>                k = 2，r 为 {0，1，2，3} 集合中的任何一个数。<br>        第 3 次冲突重传时：<br>                k = 3，r 为 {0，1，2，3，4，5，6，7} 集合中的任何一个数。</p>
<p>10 Mbit/s 以太网争用期的长度<br>10 Mbit/s 以太网取：<br>$$<br>51.2 \mu s<br>$$<br>为争用期的长度。<br>对于 10 Mbit/s 以太网，在争用期内可发送 512 bit，即 64 字节。<br><strong>这意味着：以太网在发送数据时，若前 64 字节没有发生冲突，则后续的数据就不会发生冲突。</strong></p>
<p>最短有效帧长<br>如果发生冲突，就一定是在发送的前 64 字节之内。<br>由于一检测到冲突就立即中止发送，这时已经发送出去的数据一定小于 64 字节。<br>以太网规定了最短有效帧长为 64 字节，凡长度小于 64 字节的帧都是由于冲突而异常中止的<strong>无效帧</strong>。</p>
<p>覆盖范围<br>在 10 Mbit/s 以太网 51.2 μs 的争用期内，信号能传输多远的距离？<br>以太网上最大的端到端单程时延必须小于争用期的一半（即 25.6 μs），这相当于以太网的最大端到端长度约为 5 km。</p>
<p>人为干扰信号</p>
<p><img src="https://i.loli.net/2020/06/08/6tJ4KX1nwHbYzpo.png" alt="人为干扰信号"><br>注意：B 也能够检测到冲突，并立即停止发送数据帧，接着就发送干扰信号。这里为了简单起见，只画出 A 发送干扰信号的情况。</p>
<h4 id="CSMA-CD-协议的重要特性"><a href="#CSMA-CD-协议的重要特性" class="headerlink" title="CSMA/CD 协议的重要特性"></a>CSMA/CD 协议的重要特性</h4><p>使用 CSMA/CD 协议的以太网<strong>不能进行全双工通信而只能进行双向交替通信</strong>（半双工通信）。<br>每个站在发送数据之后的一小段时间内，存在着遭遇碰撞的可能性。<br>这种<strong>发送的不确定性</strong>使整个以太网的平均通信量远小于以太网的最高数据率。 </p>
<p><img src="https://i.loli.net/2020/06/08/XtFjcVgrG7zhW6R.png" alt="CSMA/CD 协议的要点"></p>
<h3 id="使用集线器的星形拓扑"><a href="#使用集线器的星形拓扑" class="headerlink" title="使用集线器的星形拓扑"></a>使用集线器的星形拓扑</h3><p>传统以太网最初是使用粗同轴电缆，后来演进到使用比较便宜的细同轴电缆，最后发展为使用更便宜和更灵活的双绞线。<br>采用双绞线的以太网采用星形拓扑，在星形的中心则增加了一种可靠性非常高的设备，叫做<strong>集线器</strong> (hub)。<br>传统以太网使用同轴电缆，采用总线形拓扑结构</p>
<p>使用集线器的双绞线以太网<br><img src="https://i.loli.net/2020/06/08/I6yuP9D3zZKhRNB.png" alt="使用集线器的双绞线以太网"></p>
<p>星形以太网 10BASE-T<br><img src="https://i.loli.net/2020/06/08/P6DbJyTKIEuvoaX.png" alt="星形以太网 10BASE-T"><br>使用无屏蔽双绞线，采用星形拓扑。<br>每个站需要用两对双绞线，分别用于发送和接收。<br>双绞线的两端使用 RJ-45 插头。<br>集线器使用了大规模集成电路芯片，因此集线器的可靠性提高。<br>10BASE-T 的通信距离稍短，每个站到集线器的距离不超过 100m。</p>
<p>10BASE-T 以太网在局域网中的统治地位<br>这种 10 Mbit/s 速率的无屏蔽双绞线星形网的出现，既降低了成本，又提高了可靠性。 具有很高的性价比。<br>10BASE-T 双绞线以太网的出现，是局域网发展史上的一个非常重要的里程碑，它为以太网在局域网中的统治地位奠定了牢固的基础。<br>从此以太网的拓扑就从总线形变为更加方便的星形网络，而以太网也就在局域网中占据了统治地位。 </p>
<h4 id="集线器（HUB）特点"><a href="#集线器（HUB）特点" class="headerlink" title="集线器（HUB）特点"></a>集线器（HUB）特点</h4><p>集线器是使用电子器件来模拟实际电缆线的工作，因此整个系统仍然像一个传统的以太网那样运行。<br><strong>使用集线器的以太网在逻辑上仍是一个总线网，各工作站使用的还是 CSMA/CD 协议，并共享逻辑上的总线。</strong><br>集线器很像一个多接口的转发器，<strong>工作在物理层</strong>。<br>集线器采用了专门的芯片，进行自适应串音回波抵消，减少了近端串音。</p>
<h3 id="以太网的信道利用率"><a href="#以太网的信道利用率" class="headerlink" title="以太网的信道利用率"></a>以太网的信道利用率</h3><p>多个站在以太网上同时工作就可能会发生碰撞。<br>当发生碰撞时，信道资源实际上是被浪费了。因此，当扣除碰撞所造成的信道损失后，<strong>以太网总的信道利用率并不能达到 100%。</strong><br>假设:<br>$$<br>\tau<br>$$<br> 是以太网单程端到端传播时延。则争用期长度为<br>$$<br>2\tau<br>$$<br>即端到端传播时延的两倍。检测到碰撞后不发送干扰信号。<br>设帧长为 L (bit)，数据发送速率为 C (bit/s)，则帧的发送时间为  :<br>$$<br>T_0 = L/C (s)。<br>$$<br><strong>以太网信道被占用的情况</strong><br>一个站在发送帧时出现了碰撞。经过一个争用期:<br>$$<br>2\tau<br>$$<br>后，可能又出现了碰撞。这样经过若干个争用期后，一个站发送成功了。假定发送帧需要的时间是 T0。<br>注意到，成功发送一个帧需要占用信道的时间是<br>$$<br>T_0 + \tau<br>$$<br>比这个帧的发送时间要多一个单程端到端时延:<br>$$<br>\tau<br>$$<br>这是因为当一个站发送完最后一个比特时，这个比特还要在以太网上传播。<br>在最极端的情况下，发送站在传输媒体的一端，而比特在媒体上传输到另一端所需的时间是:<br>$$<br>\tau<br>$$</p>
<h4 id="参数a与利用率"><a href="#参数a与利用率" class="headerlink" title="参数a与利用率"></a>参数a与利用率</h4><p>$$<br>要提高以太网的信道利用率，就必须减小\tau与 T_0 之比。<br>在以太网中定义了参数 a ，它是以太网单程端到端时延\tau与帧的发送时间 T_0 之比：<br>$$</p>
<p><img src="https://i.loli.net/2020/06/09/gLbpVFSjMcY16G5.png" alt="参数a与利用率"></p>
<p>a → 0，表示一发生碰撞就立即可以检测出来， 并立即停止发送，因而信道利用率很高。<br>a 越大，表明争用期所占的比例增大，每发生一次碰撞就浪费许多信道资源，使得信道利用率明显降低。 </p>
<p>对以太网参数a的要求<br>为提高利用率，以太网的参数 a 的值应当<strong>尽可能小</strong>些。<br>对以太网参数 a 的要求是：<br>$$<br>1.当数据率一定时，以太网的连线的长度受到限制，否则\tau的数值会太大。<br>\<br>2.以太网的帧长不能太短，否则 T_0 的值会太小，使 a 值太大。<br>$$</p>
<h4 id="信道利用率的最大值"><a href="#信道利用率的最大值" class="headerlink" title="信道利用率的最大值"></a>信道利用率的最大值</h4><p>在理想化的情况下，以太网上的各站发送数据都不会产生碰撞（这显然已经不是 CSMA/CD，而是需要使用一种特殊的调度方法），即总线一旦空闲就有某一个站立即发送数据。<br>$$<br>发送一帧占用线路的时间是 T_0 +\tau，而帧本身的发送时间是 T_0。于是，我们可计算出理想情况下的极限信道利用率 S_{max} 为：<br>$$<br><img src="https://i.loli.net/2020/06/09/xzfdKcm6YoT9hiU.png" alt="信道利用率的最大值"></p>
<p>只有当参数 a 远小于 1 才能得到尽可能高的极限信道利用率。<br>据统计，当以太网的利用率达到 30% 时就已经处于重载的情况。很多的网络容量被网上的碰撞消耗掉了。</p>
<h3 id="以太网的-MAC-层"><a href="#以太网的-MAC-层" class="headerlink" title="以太网的 MAC 层"></a>以太网的 MAC 层</h3><h4 id="MAC层的硬件地址"><a href="#MAC层的硬件地址" class="headerlink" title="MAC层的硬件地址"></a>MAC层的硬件地址</h4><p>在局域网中，<strong>硬件地址</strong>又称为<strong>物理地址</strong>，或** MAC 地址**。<br>802 标准所说的“地址”严格地讲应当是每一个站的“名字”或标识符。<br>但鉴于大家都早已习惯了将这种 48 位的“名字”称为“地址”，所以本书也采用这种习惯用法，尽管这种说法并不太严格。</p>
<p>请注意，如果连接在局域网上的主机或路由器安装有多个适配器，那么这样的主机或路由器就有多个“地址”。更准确些说，这种 48 位“地址”应当是某个接口的标识符。</p>
<h5 id="48-位的-MAC-地址"><a href="#48-位的-MAC-地址" class="headerlink" title="48 位的 MAC 地址"></a>48 位的 MAC 地址</h5><p>IEEE 802 标准规定 MAC 地址字段可采用 6 字节 ( 48位) 或 2 字节 ( 16 位) 这两种中的一种。<br>IEEE 的注册管理机构 RA 负责向厂家分配地址字段 6 个字节中的前三个字节 (即高位 24 位)，称为组织唯一标识符。<br>地址字段 6 个字节中的后三个字节 (即低位 24 位) 由厂家自行指派，称为扩展唯一标识符，必须保证生产出的适配器没有重复地址。</p>
<p><img src="https://i.loli.net/2020/06/09/iPeoYlDkUM8Rvcq.png" alt="48 位的 MAC 地址"></p>
<p>一个地址块可以生成 224 个不同的地址。这种 48 位地址称为 MAC-48，它的通用名称是 EUI-48。<br>生产适配器时，6 字节的 MAC 地址已被固化在适配器的 ROM，因此，MAC 地址也叫做<strong>硬件地址</strong> (hardware address) 或<strong>物理地址</strong>。<br>“MAC 地址”实际上就是适配器地址或适配器标识符 EUI-48。</p>
<p>单站地址、组地址、广播地址<br>IEEE 规定地址字段的第一字节的最低位为 I/G 位。I/G 表示 Individual / Group。<br>当 I/G 位 = 0 时，地址字段表示一个<strong>单站地址</strong>。<br>当 I/G 位 = 1 时，表示<strong>组地址</strong>，用来进行<strong>多播</strong>（以前曾译为组播）。此时，IEEE 只分配地址字段前三个字节中的 23 位。<br>当 I/G 位分别为 0 和 1 时，一个地址块可分别生成 223 个单个站地址和 223 个组地址。<br>所有 48 位都为 1 时，为广播地址。只能作为目的地址使用。</p>
<p>全球管理与本地管理<br>IEEE 把地址字段第一字节的最低第 2 位规定为 G/L 位，表示 Global / Local。<br>当 G/L 位 = 0 时，是全球管理（保证在全球没有相同的地址），厂商向 IEEE 购买的 OUI 都属于全球管理。<br>当 G/L 位 = 1 时， 是本地管理，这时用户可任意分配网络上的地址。</p>
<h5 id="适配器检查-MAC-地址"><a href="#适配器检查-MAC-地址" class="headerlink" title="适配器检查 MAC 地址"></a>适配器检查 MAC 地址</h5><p>适配器从网络上每收到一个 MAC 帧就首先用硬件检查 MAC 帧中的 MAC 地址。<br>        1.如果是发往本站的帧则收下，然后再进行其他的处理。<br>        2.否则就将此帧丢弃，不再进行其他的处理。<br>“发往本站的帧”包括以下三种帧：<br>        1.单播 (unicast) 帧（一对一）<br>        2.广播 (broadcast) 帧（一对全体）<br>        3.多播 (multicast) 帧（一对多）<br>所有的适配器都至少能够识别前两种帧，即<strong>能够识别单播地址和广播地址</strong>。<br>有的适配器可用编程方法识别多播地址。<br><strong>只有目的地址才能使用广播地址和多播地址</strong>。<br>以*<em>混杂方式 *</em>(promiscuous mode) 工作的以太网适配器只要“听到”有帧在以太网上传输就都接收下来。</p>
<h4 id="MAC帧的格式"><a href="#MAC帧的格式" class="headerlink" title="MAC帧的格式"></a>MAC帧的格式</h4><p>常用的以太网 MAC 帧格式有两种标准：<br>        1.DIX Ethernet V2 标准<br>        2.IEEE 的 802.3 标准<br>最常用的 MAC 帧是<strong>以太网 V2 的格式</strong>。</p>
<h5 id="以太网V2帧格式"><a href="#以太网V2帧格式" class="headerlink" title="以太网V2帧格式"></a>以太网V2帧格式</h5><p><img src="https://i.loli.net/2020/06/09/C57bEqVlI1MJOa3.png" alt="以太网 V2 的 MAC 帧格式"></p>
<p><img src="https://i.loli.net/2020/06/09/BTMNI6p8ancgREq.png" alt="以太网 V2 的 MAC 帧格式"></p>
<p><img src="https://i.loli.net/2020/06/09/YocWNHsx2ivVb1K.png" alt="以太网 V2 的 MAC 帧格式"></p>
<p><img src="https://i.loli.net/2020/06/09/UfbwYvX9iG7gR2r.png" alt="以太网 V2 的 MAC 帧格式"></p>
<p><img src="https://i.loli.net/2020/06/09/tQN6PF12eSDlMKz.png" alt="以太网 V2 的 MAC 帧格式"></p>
<p><img src="https://i.loli.net/2020/06/09/lNSjhx5JU3RMsqH.png" alt="以太网 V2 的 MAC 帧格式"></p>
<p><img src="https://i.loli.net/2020/06/09/Ynah3IybBkd7EtX.png" alt="以太网 V2 的 MAC 帧格式"></p>
<p>无效的MAC帧</p>
<p>数据字段的长度与长度字段的值不一致<br>帧的长度不是整数个字节<br>用收到的帧检验序列 FCS 查出有差错<br>数据字段的长度不在 46 ~ 1500 字节之间<br>有效的 MAC 帧长度为 64 ~ 1518 字节之间</p>
<p>对于检查出的无效 MAC 帧就简单地丢弃。以太网不负责重传丢弃的帧。 </p>
<h5 id="IEEE-802-3-MAC-帧格式"><a href="#IEEE-802-3-MAC-帧格式" class="headerlink" title="IEEE 802.3 MAC 帧格式"></a>IEEE 802.3 MAC 帧格式</h5><p>与以太网 V2 MAC 帧格式相似，区别在于：<br>    IEEE 802.3 规定的 MAC 帧的第三个字段是“长度 / 类型”。<br>            1.当这个字段值大于 0x0600 时（相当于十进制的 1536）.就表示“类型”。这样的帧和以太网 V2 MAC 帧完全一样。<br>            2.当这个字段值小于 0x0600 时才表示“长度”。<br>    当“长度/类型”字段值小于 0x0600 时，数据字段必须装入上面的逻辑链路控制 LLC 子层的 LLC 帧。</p>
<p>现在市场上流行的都是以太网 V2 的 MAC 帧，但大家也常常把它称为 IEEE 802.3 标准的 MAC 帧。</p>
<h5 id="帧间最小间隔"><a href="#帧间最小间隔" class="headerlink" title="帧间最小间隔"></a>帧间最小间隔</h5><p>帧间最小间隔为<br>$$<br> 9.6 \mu s<br>$$<br>相当于 96 bit 的发送时间。<br>$$<br>一个站在检测到总线开始空闲后，还要等待 9.6 \mu s 才能再次发送数据。<br>$$<br>这样做是为了使刚刚收到数据帧的站的接收缓存来得及清理，做好接收下一帧的准备。 </p>
<p>这样做是为了使刚刚收到数据帧的站的接收缓存来得及清理，做好接收下一帧的准备。 </p>
<h2 id="扩展以太网"><a href="#扩展以太网" class="headerlink" title="扩展以太网"></a>扩展以太网</h2><h3 id="在物理层扩展以太网"><a href="#在物理层扩展以太网" class="headerlink" title="在物理层扩展以太网"></a>在物理层扩展以太网</h3><h4 id="使用光纤扩展"><a href="#使用光纤扩展" class="headerlink" title="使用光纤扩展"></a>使用光纤扩展</h4><p>主机使用光纤（通常是一对光纤）和一对光纤调制解调器连接到集线器。<br>很容易使主机和几公里以外的集线器相连接。<br><img src="https://i.loli.net/2020/06/09/J6FhYZq7PaVNpAB.png" alt="使用光纤扩展以太网"></p>
<h4 id="使用集线器扩展"><a href="#使用集线器扩展" class="headerlink" title="使用集线器扩展"></a>使用集线器扩展</h4><p>将多个以太网段连成更大的、多级星形结构的以太网。<br><img src="https://i.loli.net/2020/06/09/hDacBHKYwA4j2kO.png" alt="使用集线器扩展以太网"></p>
<p>用集线器扩展以太网优缺点<br><strong>优点</strong><br>        1.使原来属于不同碰撞域的以太网上的计算机能够进行跨碰撞域的通信。<br>        2.扩大了以太网覆盖的地理范围。<br><strong>缺点</strong><br>        1.碰撞域增大了，但总的吞吐量并未提高。<br>        2.如果不同的碰撞域使用不同的数据率，那么就不能用集线器将它们互连起来。 </p>
<h4 id="碰撞域"><a href="#碰撞域" class="headerlink" title="碰撞域"></a>碰撞域</h4><p><strong>碰撞域</strong>（collision domain）又称为冲突域，是指网络中一个站点发出的帧会与其他站点发出的帧产生碰撞或冲突的那部分网络。<br>碰撞域越大，发生碰撞的概率越高。<br><img src="https://i.loli.net/2020/06/09/brpOs3zvKIQkASc.png" alt="碰撞域"></p>
<h3 id="在数据链路层扩展以太网"><a href="#在数据链路层扩展以太网" class="headerlink" title="在数据链路层扩展以太网"></a>在数据链路层扩展以太网</h3><p>扩展以太网更常用的方法是在数据链路层进行。<br>早期使用<strong>网桥</strong>，现在使用<strong>以太网交换机</strong>。<br><img src="https://i.loli.net/2020/06/09/CbYtDRSvl5agjPG.png" alt="在数据链路层扩展以太网"></p>
<h4 id="网桥"><a href="#网桥" class="headerlink" title="网桥"></a>网桥</h4><p><strong>网桥工作在数据链路层</strong>。<br>它根据 MAC 帧的目的地址对收到的帧进行<strong>转发</strong>和<strong>过滤</strong>。<br>当网桥收到一个帧时，并不是向所有的接口转发此帧，而是先检查此帧的目的 MAC 地址，然后再确定将该帧转发到哪一个接口，或把它丢弃。 </p>
<h4 id="以太网交换机"><a href="#以太网交换机" class="headerlink" title="以太网交换机"></a>以太网交换机</h4><p>1990 年问世的交换式集线器 (switching hub) 可明显地提高以太网的性能。<br>交换式集线器常称为<strong>以太网交换机</strong> (switch) 或第二层交换机 (L2 switch)，强调这种交换机工作在数据链路层。</p>
<h5 id="以太网交换机的特点"><a href="#以太网交换机的特点" class="headerlink" title="以太网交换机的特点"></a>以太网交换机的特点</h5><p>以太网交换机实质上就是一个<strong>多接口的网桥</strong>。通常都有十几个或更多的接口。<br>每个接口都直接与一个单台主机或另一个以太网交换机相连，并且一般都工作在<strong>全双工方式</strong>。<br>以太网交换机具<strong>有并行性</strong>。能同时连通多对接口，使多对主机能同时通信。<br>相互通信的主机都是独占传输媒体，无碰撞地传输数据。<br><img src="https://i.loli.net/2020/06/09/a1KfU4ZtykXLzjR.png" alt="相互通信的主机都是独占传输媒体"></p>
<p>以太网交换机的<strong>接口有存储器</strong>，能在输出端口繁忙时把到来的帧进行缓存。<br>以太网交换机是一种<strong>即插即用设备</strong>，其内部的帧<strong>交换表</strong>（又称为地址表）是通过<strong>自学习算法</strong>自动地逐渐建立起来的。<br>以太网交换机使用了<strong>专用的交换结构芯片</strong>，用硬件转发，其转发速率要比使用软件转发的网桥快很多。<br>以太网交换机的性能远远超过普通的集线器，而且价格并不贵。</p>
<h5 id="以太网交换机的优点"><a href="#以太网交换机的优点" class="headerlink" title="以太网交换机的优点"></a>以太网交换机的优点</h5><p>用户独享带宽，增加了总容量。<br><img src="https://i.loli.net/2020/06/09/zYWyaT21HUNJpRS.png" alt="用户独享带宽，增加了总容量"></p>
<p>从共享总线以太网转到交换式以太网时，所有接入设备的软件和硬件、适配器等都不需要做任何改动。<br>以太网交换机一般都具有多种速率的接口，方便了各种不同情况的用户。</p>
<h5 id="以太网交换机的交换方式"><a href="#以太网交换机的交换方式" class="headerlink" title="以太网交换机的交换方式"></a>以太网交换机的交换方式</h5><h6 id="存储转发方式"><a href="#存储转发方式" class="headerlink" title="存储转发方式"></a>存储转发方式</h6><p>把整个数据帧先缓存后再进行处理。</p>
<h6 id="直通-cut-through-方式"><a href="#直通-cut-through-方式" class="headerlink" title="直通 (cut-through) 方式"></a>直通 (cut-through) 方式</h6><p>接收数据帧的同时就<strong>立即按数据帧的目的 MAC 地址决定该帧的转发接口</strong>，因而提高了帧的转发速度。<br><strong>缺点</strong>是它不检查差错就直接将帧转发出去，因此有可能也将一些无效帧转发给其他的站。</p>
<p>在某些情况下，仍需要采用基于软件的存储转发方式进行交换，例如，当需要进行线路速率匹配、协议转换或差错检测时。</p>
<h5 id="以太网交换机的自学习功能-重要"><a href="#以太网交换机的自学习功能-重要" class="headerlink" title="以太网交换机的自学习功能(重要)"></a>以太网交换机的自学习功能(重要)</h5><p>以太网交换机运行自学习算法自动维护交换表。<br><img src="https://i.loli.net/2020/06/09/ZWcrHFVjnkie8JG.png" alt="以太网交换机的自学习功能"><br><img src="https://i.loli.net/2020/06/09/LeYv6Bm4MjiAonl.png" alt="以太网交换机的自学习功能"><br><img src="https://i.loli.net/2020/06/09/ivwxAkJaU8Nb41q.png" alt="以太网交换机的自学习功能"><br><img src="https://i.loli.net/2020/06/09/GWd9NVKfsH3XrkB.png" alt="以太网交换机的自学习功能"><br><img src="https://i.loli.net/2020/06/09/3iTdSK4YvjlUgqf.png" alt="以太网交换机的自学习功能"></p>
<p>以太网交换机的这种自学习方法使得以太网交换机能够即插即用，不必人工进行配置，因此非常方便。</p>
<p>交换机自学习和转发帧的步骤归纳<br><img src="https://i.loli.net/2020/06/09/MCcygIZBko5wLPp.png" alt="交换机自学习和转发帧的步骤归纳"></p>
<p>理解以太网交换机的自学习功能<br><img src="https://i.loli.net/2020/06/09/N7PYwpEJdrMBU5x.png" alt="image-20200609090644860"><br><img src="https://i.loli.net/2020/06/09/FoHWMmJQqcOy925.png" alt="以太网交换机的自学习功能"></p>
<p>以太网交换机自学习功能要避免交换机产生回路，在交换表还是空白时，若存在回路，转发帧会一直在回路中循环，消耗网络资源。</p>
<p>交换机使用了生成树协议<br>IEEE 802.1D 标准制定了一个<strong>生成树协议 STP ** (Spanning Tree Protocol)。<br>其</strong>要点<strong>是：</strong>不改变<strong>网络的实际拓扑，但在逻辑上则切断某些链路，使得从一台主机到所有其他主机的路径是</strong>无环路的树状结构**，从而消除了兜圈子现象，解决回路问题。<br><img src="https://i.loli.net/2020/06/09/kyx6sOeZwr37Dmd.png" alt="生成树协议 STP "></p>
<h4 id="从总线以太网到星形以太网"><a href="#从总线以太网到星形以太网" class="headerlink" title="从总线以太网到星形以太网"></a>从总线以太网到星形以太网</h4><p>早期，以太网采用无源的总线结构。<br>现在，采用以太网交换机的星形结构成为以太网的首选拓扑。<br>总线以太网使用 CSMA/CD 协议，以半双工方式工作。<br>以太网交换机不使用共享总线，没有碰撞问题，因此不使用 CSMA/CD 协议，以全双工方式工作。但<strong>仍然采用以太网的帧结构</strong>。<br><img src="https://i.loli.net/2020/06/09/8t2Wj4Vrk7aeFRX.png" alt="从总线以太网到星形以太网"></p>
<p>局域网存在的问题<br>        1.扩展性<br>        2.安全性<br>        3.可管理性 等</p>
<p>总线以太网 和 10Base_T 星形以太网</p>
<p>所有计算机都处于同一个<strong>碰撞域</strong>（或冲突域）中和同一个<strong>广播域</strong>中。<br><img src="https://i.loli.net/2020/06/09/lnDbrCsteYLBf3p.png" alt="总线以太网 和 10Base_T 星形以太网"><br><img src="https://i.loli.net/2020/06/09/msHhCkvXWdFgtNj.png" alt="总线以太网 和 10Base_T 星形以太网"></p>
<p>广播域（broadcast domain）：指这样一部分网络，其中任何一台设备发出的广播通信都能被该部分网络中的所有其他设备所接收。</p>
<p>采用以太网交换机的星形以太网</p>
<p>每个接口都处于一个<strong>独立的碰撞域</strong>（或冲突域）中，但所有计算机都处于<strong>同一个广播域</strong>中。<br><img src="https://i.loli.net/2020/06/09/cfZW9bgkmezNrUw.png" alt="采用以太网交换机的星形以太网"><br><img src="https://i.loli.net/2020/06/09/z5tlH8VG1uhBsCN.png" alt="采用以太网交换机的星形以太网"></p>
<h3 id="虚拟局域网（重要）"><a href="#虚拟局域网（重要）" class="headerlink" title="虚拟局域网（重要）"></a>虚拟局域网（重要）</h3><p>利用以太网交换机可以很方便地实现虚拟局域网 VLAN (Virtual LAN)。<br>IEEE 802.1Q 对虚拟局域网 VLAN 的<strong>定义</strong>：<br><strong>虚拟局域网 VLAN</strong> 是由一些局域网网段构成的与物理位置无关的逻辑组，而这些网段具有某些共同的需求。每一个 VLAN 的帧都有一个明确的标识符，指明发送这个帧的计算机是属于哪一个 VLAN。<br><strong>虚拟局域网其实只是局域网给用户提供的一种服务，而并不是一种新型局域网。</strong><br>由于虚拟局域网是用户和网络资源的逻辑组合，因此可按照需要将有关设备和资源非常方便地重新组合，使用户从不同的服务器或数据库中存取所需的资源。<br><img src="https://i.loli.net/2020/06/09/DjrCNoMut8ISa1w.png" alt="虚拟局域网 VLAN"><br><img src="https://i.loli.net/2020/06/09/VlJ59KZD84aqNPr.png" alt="虚拟局域网 VLAN"><br><img src="https://i.loli.net/2020/06/09/xeaLN2DAU7mbWvo.png" alt="虚拟局域网 VLAN"><br><img src="https://i.loli.net/2020/06/09/YTZMQAuD9z8yL73.png" alt="虚拟局域网 VLAN"><br><img src="https://i.loli.net/2020/06/09/1yfmiu62qbgPxOr.png" alt="虚拟局域网 VLAN"></p>
<p>虚拟局域网（VLAN）技术具有以下<strong>主要优点</strong>：<br>        1.改善了性能<br>        2.简化了管理<br>        3.降低了成本<br>        4.改善了安全性</p>
<p>划分虚拟局域网的方法<br>        1.基于交换机端口<br>                最简单、也是最常用的方法。<br>                属于在第一层划分虚拟局域网的方法。<br>                <strong>缺点</strong>：不允许用户移动。</p>
<p>​        2.基于计算机网卡的MAC地址<br>​                根据用户计算机的MAC地址划分虚拟局域网。<br>​                属于在第二层划分虚拟局域网的方法。<br>​                允许用户移动。<br>​                <strong>缺点</strong>：需要输入和管理大量的MAC地址。如果用户的MAC地址改变了，则需要管理员重新配置VLAN。</p>
<p>​        3.基于协议类型<br>​                根据以太网帧的第三个字段“类型”字段确定该类型的协议属于哪一个虚拟局域网。<br>​                属于在第二层划分虚拟局域网的方法。</p>
<p>​        4.基于IP子网地址<br>​                根据以太网帧的第三个字段“类型”字段和IP分组首部中的源 IP 地址字段确定该 IP 分组属于哪一个虚拟局域网。<br>​                属于在第三层划分虚拟局域网的方法。</p>
<p>​        5.基于高层应用或服务<br>​                根据高层应用或服务、或者它们的组合划分虚拟局域网。<br>​                更加灵活，但更加复杂。</p>
<p>虚拟局域网使用的以太网帧格式<br>IEEE 批准了 802.3ac 标准，该标准定义了以太网的帧格式的扩展，以支持虚拟局域网。<br>虚拟局域网协议允许在以太网的帧格式中插入一个4字节的标识符，称为 <strong>VLAN 标记</strong> (tag)，用来指明该帧属于哪一个虚拟局域网。<br>插入VLAN标记得出的帧称为 802.1Q 帧或带标记的以太网帧。<br><img src="https://i.loli.net/2020/06/09/oFSm6i5hXZLqAtW.png" alt="虚拟局域网使用的以太网帧格式"><br><img src="https://i.loli.net/2020/06/09/njwRFLegJfVEYr8.png" alt="虚拟局域网使用的以太网帧格式"></p>
<h2 id="高速以太网"><a href="#高速以太网" class="headerlink" title="高速以太网"></a>高速以太网</h2><h3 id="100BASE-T-以太网"><a href="#100BASE-T-以太网" class="headerlink" title="100BASE-T 以太网"></a>100BASE-T 以太网</h3><p><strong>速率达到或超过 100 Mbit/s 的以太网称为高速以太网</strong>。<br>100BASE-T 在双绞线上传送 100 Mbit/s 基带信号的星形拓扑以太网，仍使用 IEEE 802.3 的 CSMA/CD 协议。<br>100BASE-T 以太网又称为<strong>快速以太网</strong> (Fast Ethernet)。<br>1995 年IEEE已把 100BASE-T 的快速以太网定为正式标准，其代号为 IEEE 802.3u。</p>
<p>100BASE-T 以太网的特点<br>可在全双工方式下工作而无冲突发生。<strong>在全双工方式下工作时，不使用 CSMA/CD 协议</strong>。<br><strong>MAC 帧格式仍然是 802.3 标准规定的</strong>。<br><strong>保持最短帧长不变，但将一个网段的最大电缆长度减小到 100 米</strong>。<br>$$<br>帧间时间间隔从原来的 9.6 \mu s 改为现在的 0.96 \mu s<br>$$<br> 100 Mbit/s 以太网的三种不同的物理层标准<br>100BASE-TX<br>        1.使用 2 对 UTP 5 类线 或 屏蔽双绞线 STP。<br>        2.网段最大程度：100 米。<br>100BASE-T4<br>        1.使用 4 对 UTP 3 类线 或 5 类线。<br>        2.网段最大程度：100 米。<br>100BASE-FX<br>        1.使用 2 对光纤。<br>        2.网段最大程度：2000 米。</p>
<h3 id="吉比特以太网"><a href="#吉比特以太网" class="headerlink" title="吉比特以太网"></a>吉比特以太网</h3><p>允许在 1 Gbit/s 下以全双工和半双工两种方式工作。<br>使用 IEEE 802.3 协议规定的帧格式。<br><strong>在半双工方式下使用 CSMA/CD 协议，全双工方式不使用 CSMA/CD 协议</strong>。<br>与 10BASE-T 和 100BASE-T 技术向后兼容。</p>
<p>吉比特以太网可用作现有网络的主干网，也可在高带宽（高速率）的应用场合中。</p>
<p>吉比特以太网的物理层<br>使用两种成熟的技术：一种来自现有的以太网，另一种则是美国国家标准协会 ANSI 制定的光纤通道 FC  (Fiber Channel)。<br><img src="https://i.loli.net/2020/06/09/HwBpR1bxtWGmvzf.png" alt="吉比特以太网的物理层标准"></p>
<p>半双工方式工作的吉比特以太网<br>吉比特以太网工作在半双工方式时，就必须进行碰撞检测。<br>为保持 64 字节最小帧长度，以及 100 米的网段的最大长度，吉比特以太网增加了两个功能：<br>        1.载波延伸 (carrier extension)<br>            使最短帧长仍为 64 字节（这样可以保持兼容性），同时将争用时间增大为 512 字节。<br>            凡发送的 MAC 帧长不足 512 字节时，就用一些特殊字符填充在帧的后面，使MAC 帧的发送长度增大到 512 字节。            接收端在收到以太网的 MAC 帧后，要将所填充的特殊字符删除后才向高层交付。<br><img src="https://i.loli.net/2020/06/09/49ZKaM2YrnPBNgV.png" alt="载波延伸"></p>
<p>​        2.分组突发 (packet bursting)<br>​            当很多短帧要发送时，第一个短帧要采用载波延伸方法进行填充，随后的一些短帧则可一个接一个地发送，只需留            有必要的帧间最小间隔即可。这样就形成可一串分组的突发，直到达到 1500 字节或稍多一些为止。<br><img src="https://i.loli.net/2020/06/09/52lAtKbTQDzuC13.png" alt="分组突发"></p>
<p>全双工方式工作的吉比特以太网<br>当吉比特以太网工作在全双工方式时（即通信双方可同时进行发送和接收数据），<strong>不使用载波延伸和分组突发</strong>。</p>
<h3 id="10-吉比特以太网-10GE-和更快的以太网"><a href="#10-吉比特以太网-10GE-和更快的以太网" class="headerlink" title="10 吉比特以太网 (10GE) 和更快的以太网"></a>10 吉比特以太网 (10GE) 和更快的以太网</h3><p>10 吉比特以太网（10GE）并非把吉比特以太网的速率简单地提高到 10 倍，其主要特点有：<br>        1.与 10 Mbit/s、100 Mbit/s 和 1 Gbit/s 以太网的帧格式完全相同。<br>        2.保留了 802.3 标准规定的以太网最小和最大帧长，便于升级。<br>        3.不再使用铜线而只使用光纤作为传输媒体。<br>        4.<strong>只工作在全双工方式</strong>，因此没有争用问题，也不使用 CSMA/CD 协议。 </p>
<p>10 吉比特以太网的物理层<br><img src="https://i.loli.net/2020/06/09/y73aotmCdbS5Tu9.png" alt="10GE物理层标准"></p>
<p>40GE/100GE 的物理层<br><img src="https://i.loli.net/2020/06/09/SCbEOKcwqsJP8DA.png" alt="40GE/100GE 的物理层标准"></p>
<p>端到端的以太网传输<br>以太网的工作范围已经从局域网（校园网、企业网）扩大到城域网和广域网，从而<strong>实现了端到端的以太网传输</strong>。<br>这种工作方式的好处有：<br>        1.技术成熟<br>        2.互操作性很好<br>        3.在广域网中使用以太网时价格便宜<br>        4.采用统一的以太网帧格式，简化了操作和管理。</p>
<h3 id="使用以太网进行宽带接入"><a href="#使用以太网进行宽带接入" class="headerlink" title="使用以太网进行宽带接入"></a>使用以太网进行宽带接入</h3><p>IEEE 在 2001 年初成立了 802.3 EFM 工作组，专门研究高速以太网的宽带接入技术问题。<br>以太网宽带接入具有以下特点：<br>        1.可以提供双向的宽带通信。<br>        2.可以根据用户对带宽的需求灵活地进行带宽升级。<br>        3.可以实现端到端的以太网传输,中间不需要再进行帧格式的转换。这就提高了数据的传输效率且降低了传输的成本。<br>        4.但是不支持用户身份鉴别。</p>
<p>PPPoE<br>PPPoE (PPP over Ethernet) 的意思是“在以太网上运行 PPP”，它把 PPP 协议与以太网协议结合起来 —— 将 PPP 帧再封装到以太网中来传输。<br>现在的光纤宽带接入 FTTx 都要使用 PPPoE 的方式进行接入。在 PPPoE 弹出的窗口中键入在网络运营商购买的用户名和密码，就可以进行宽带上网了。<br>利用 ADSL 进行宽带上网时，从用户个人电脑到家中的 ADSL 调制解调器之间，也是使用 RJ-45 和 5 类线（即以太网使用的网线）进行连接<br>的，并且也是使用 PPPoE 弹出的窗口进行拨号连接的。</p>
<h1 id="网络层"><a href="#网络层" class="headerlink" title="网络层"></a>网络层</h1><h2 id="网络层提供的两种服务"><a href="#网络层提供的两种服务" class="headerlink" title="网络层提供的两种服务"></a>网络层提供的两种服务</h2><h2 id="网际协议IP"><a href="#网际协议IP" class="headerlink" title="网际协议IP"></a>网际协议IP</h2><h2 id="划分子网和构造超网"><a href="#划分子网和构造超网" class="headerlink" title="划分子网和构造超网"></a>划分子网和构造超网</h2><h2 id="网际控制报文协议ICMP"><a href="#网际控制报文协议ICMP" class="headerlink" title="网际控制报文协议ICMP"></a>网际控制报文协议ICMP</h2><h2 id="互联网的路由选择协议"><a href="#互联网的路由选择协议" class="headerlink" title="互联网的路由选择协议"></a>互联网的路由选择协议</h2><h2 id="IPv6"><a href="#IPv6" class="headerlink" title="IPv6"></a>IPv6</h2><h2 id="IP多播"><a href="#IP多播" class="headerlink" title="IP多播"></a>IP多播</h2><h2 id="虚拟专用网VPN和网络地址转换NAT"><a href="#虚拟专用网VPN和网络地址转换NAT" class="headerlink" title="虚拟专用网VPN和网络地址转换NAT"></a>虚拟专用网VPN和网络地址转换NAT</h2><h2 id="多协议标记交换MPLS"><a href="#多协议标记交换MPLS" class="headerlink" title="多协议标记交换MPLS"></a>多协议标记交换MPLS</h2><script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <i class="fas fa-exclamation-circle"></i>
            请联系作者
            <span class="reprint-info">
                <a href="https://auntyang.tk" rel="external nofollow noreferrer">auntyang</a>
            </span>
            付费转载。
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E5%A4%8D%E4%B9%A0/">
                                    <span class="chip bg-color">复习</span>
                                </a>
                            
                                <a href="/tags/%E8%80%83%E7%A0%94/">
                                    <span class="chip bg-color">考研</span>
                                </a>
                            
                                <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/">
                                    <span class="chip bg-color">计算机网络原理</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    
        <style>
    .valine-card {
        margin: 1.5rem auto;
    }

    .valine-card .card-content {
        padding: 20px 20px 5px 20px;
    }

    #vcomments textarea {
        box-sizing: border-box;
        background: url("/medias/comment_bg.png") 100% 100% no-repeat;
    }

    #vcomments p {
        margin: 2px 2px 10px;
        font-size: 1.05rem;
        line-height: 1.78rem;
    }

    #vcomments blockquote p {
        text-indent: 0.2rem;
    }

    #vcomments a {
        padding: 0 2px;
        color: #4cbf30;
        font-weight: 500;
        text-decoration: none;
    }

    #vcomments img {
        max-width: 100%;
        height: auto;
        cursor: pointer;
    }

    #vcomments ol li {
        list-style-type: decimal;
    }

    #vcomments ol,
    ul {
        display: block;
        padding-left: 2em;
        word-spacing: 0.05rem;
    }

    #vcomments ul li,
    ol li {
        display: list-item;
        line-height: 1.8rem;
        font-size: 1rem;
    }

    #vcomments ul li {
        list-style-type: disc;
    }

    #vcomments ul ul li {
        list-style-type: circle;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    #vcomments table, th, td {
        border: 0;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments h1 {
        font-size: 1.85rem;
        font-weight: bold;
        line-height: 2.2rem;
    }

    #vcomments h2 {
        font-size: 1.65rem;
        font-weight: bold;
        line-height: 1.9rem;
    }

    #vcomments h3 {
        font-size: 1.45rem;
        font-weight: bold;
        line-height: 1.7rem;
    }

    #vcomments h4 {
        font-size: 1.25rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    #vcomments h5 {
        font-size: 1.1rem;
        font-weight: bold;
        line-height: 1.4rem;
    }

    #vcomments h6 {
        font-size: 1rem;
        line-height: 1.3rem;
    }

    #vcomments p {
        font-size: 1rem;
        line-height: 1.5rem;
    }

    #vcomments hr {
        margin: 12px 0;
        border: 0;
        border-top: 1px solid #ccc;
    }

    #vcomments blockquote {
        margin: 15px 0;
        border-left: 5px solid #42b983;
        padding: 1rem 0.8rem 0.3rem 0.8rem;
        color: #666;
        background-color: rgba(66, 185, 131, .1);
    }

    #vcomments pre {
        font-family: monospace, monospace;
        padding: 1.2em;
        margin: .5em 0;
        background: #272822;
        overflow: auto;
        border-radius: 0.3em;
        tab-size: 4;
    }

    #vcomments code {
        font-family: monospace, monospace;
        padding: 1px 3px;
        font-size: 0.92rem;
        color: #e96900;
        background-color: #f8f8f8;
        border-radius: 2px;
    }

    #vcomments pre code {
        font-family: monospace, monospace;
        padding: 0;
        color: #e8eaf6;
        background-color: #272822;
    }

    #vcomments pre[class*="language-"] {
        padding: 1.2em;
        margin: .5em 0;
    }

    #vcomments code[class*="language-"],
    pre[class*="language-"] {
        color: #e8eaf6;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }

    #vcomments b,
    strong {
        font-weight: bold;
    }

    #vcomments dfn {
        font-style: italic;
    }

    #vcomments small {
        font-size: 85%;
    }

    #vcomments cite {
        font-style: normal;
    }

    #vcomments mark {
        background-color: #fcf8e3;
        padding: .2em;
    }

    #vcomments table, th, td {
        padding: 12px 13px;
        border: 1px solid #dfe2e5;
    }

    table tr:nth-child(2n), thead {
        background-color: #fafafa;
    }

    #vcomments table th {
        background-color: #f2f2f2;
        min-width: 80px;
    }

    #vcomments table td {
        min-width: 80px;
    }

    #vcomments [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        margin-left: -1.3rem;
        margin-right: 0.4rem;
        margin-top: -1px;
        vertical-align: middle;
        left: unset;
        visibility: visible;
    }
</style>

<div class="card valine-card" data-aos="fade-up">
    <div class="comment_headling" style="font-size: 20px; font-weight: 700; position: relative; padding-left: 20px; top: 15px; padding-bottom: 5px;">
        <i class="fas fa-comments fa-fw" aria-hidden="true"></i>
        <span>评论</span>
    </div>
    <div id="vcomments" class="card-content" style="display: grid">
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/valine/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/valine/Valine.min.js"></script>
<script>
    new Valine({
        el: '#vcomments',
        appId: 'rWsHOfhoAlGbkuNrzI5utmCu-gzGzoHsz',
        appKey: 'tzdnMiuY5FznAsYoXnwBeVUn',
        notify: 'false' === 'true',
        verify: 'false' === 'true',
        visitor: 'true' === 'true',
        avatar: 'mm',
        pageSize: '10',
        lang: 'zh-cn',
        placeholder: 'just go go'
    });
</script>

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2020/06/09/shu-ju-ku-yuan-li-fu-xi-bi-ji/">
                    <div class="card-image">
                        
                        
                        <img src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/medias/featureimages/5.jpg" class="responsive-img" alt="数据库原理复习笔记">
                        
                        <span class="card-title">数据库原理复习笔记</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            数据库原理复习笔记总纲，个人总结，个人使用。密码是sql
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2020-06-09
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/source/categories/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/" class="post-category">
                                    数据库原理
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E5%A4%8D%E4%B9%A0/">
                        <span class="chip bg-color">复习</span>
                    </a>
                    
                    <a href="/tags/%E8%80%83%E7%A0%94/">
                        <span class="chip bg-color">考研</span>
                    </a>
                    
                    <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%8E%9F%E7%90%86/">
                        <span class="chip bg-color">数据库原理</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2020/05/22/ji-suan-ji-wang-luo-yuan-li-shi-yan-12/">
                    <div class="card-image">
                        
                        
                        <img src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/medias/featureimages/12.jpg" class="responsive-img" alt="路由器OSPF动态路由配置">
                        
                        <span class="card-title">路由器OSPF动态路由配置</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            掌握OSPF协议的配置方法、掌握查看通过动态路由协议OSPF学习产生的路由、熟悉广域网线缆的链接方式
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2020-05-22
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/source/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/" class="post-category">
                                    计算机网络原理
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/%E5%AE%9E%E9%AA%8C/">
                        <span class="chip bg-color">实验</span>
                    </a>
                    
                    <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">
                        <span class="chip bg-color">计算机网络</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('100')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: 小准子_Code<br />'
            + '文章作者: auntyang<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/codeBlock/codeShrink.js"></script>


<!-- 代码块折行 -->

<style type="text/css">
code[class*="language-"], pre[class*="language-"] { white-space: pre !important; }
</style>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('5'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>


<script src="https://cdn.bootcss.com/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
    MathJax.Hub.Config({
        tex2jax: {inlineMath: [['$', '$'], ['\(', '\)']]}
    });
</script>



    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='true'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            <span id="year">2020</span>
            <a href="/about" target="_blank">auntyang</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                class="white-color">85k</span>&nbsp;字
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <span id="sitetime">载入运行时间...</span>
            <script>
                function siteTime() {
                    var seconds = 1000;
                    var minutes = seconds * 60;
                    var hours = minutes * 60;
                    var days = hours * 24;
                    var years = days * 365;
                    var today = new Date();
                    var startYear = "2020";
                    var startMonth = "5";
                    var startDate = "13";
                    var startHour = "0";
                    var startMinute = "0";
                    var startSecond = "0";
                    var todayYear = today.getFullYear();
                    var todayMonth = today.getMonth() + 1;
                    var todayDate = today.getDate();
                    var todayHour = today.getHours();
                    var todayMinute = today.getMinutes();
                    var todaySecond = today.getSeconds();
                    var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                    var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                    var diff = t2 - t1;
                    var diffYears = Math.floor(diff / years);
                    var diffDays = Math.floor((diff / days) - diffYears * 365);
                    var diffHours = Math.floor((diff - (diffYears * 365 + diffDays) * days) / hours);
                    var diffMinutes = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours) /
                        minutes);
                    var diffSeconds = Math.floor((diff - (diffYears * 365 + diffDays) * days - diffHours * hours -
                        diffMinutes * minutes) / seconds);
                    if (startYear == todayYear) {
                        document.getElementById("year").innerHTML = todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffDays + " 天 " + diffHours +
                            " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    } else {
                        document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                        document.getElementById("sitetime").innerHTML = "本站已安全运行 " + diffYears + " 年 " + diffDays +
                            " 天 " + diffHours + " 小时 " + diffMinutes + " 分钟 " + diffSeconds + " 秒";
                    }
                }
                setInterval(siteTime, 1000);
            </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/AuntYang" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:auntyang@foxmail.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=2625475244" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 2625475244" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>



    <a href="https://weibo.com/5447676494" class="tooltipped" target="_blank" data-tooltip="关注我的微博: https://weibo.com/5447676494" data-position="top" data-delay="50">
        <i class="fab fa-weibo"></i>
    </a>



    <a href="https://www.zhihu.com/people/zhun-zhun-12-63" class="tooltipped" target="_blank" data-tooltip="关注我的知乎: https://www.zhihu.com/people/zhun-zhun-12-63" data-position="top" data-delay="50">
        <i class="fab fa-zhihu1">知</i>
    </a>



    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/js/search.js"></script>
<script type="text/javascript">
$(function () {
    searchFunc("https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/search.xml", 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/materialize/materialize.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/aos/aos.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    

    

    

    
    <script src="https://cdn.jsdelivr.net/gh/AuntYang/AuntYang.github.io/libs/instantpage/instantpage.js" type="module"></script>
    

        <!-- 天气 auntyang add 2020-05-18 -->
    <script type="text/javascript">
    var windowWidth = $(window).width();
    WIDGET = {FID: 'lVXUTTTcmv'}
    </script>
    <script type="text/javascript" src="https://apip.weatherdt.com/float/static/js/r.js?v=1111"></script>

         <!-- 樱花飘落 auntyang add 2020-05-18 -->
    <script type="text/javascript">
        //只在桌面版网页启用特效
        var windowWidth = $(window).width();
        if (windowWidth > 768) {
            document.write('<script type="text/javascript" src="/js/sakura.js"><\/script>');
        }
        </script>
</body>

</html>
